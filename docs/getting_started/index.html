<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="search" type="application/opensearchdescription+xml" title="Scala CLI" href="/opensearch.xml"><title data-react-helmet="true">Getting started | Scala CLI</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://scala-cli.virtuslab.org//img/logo.png"><meta data-react-helmet="true" name="twitter:image" content="https://scala-cli.virtuslab.org//img/logo.png"><meta data-react-helmet="true" property="og:url" content="https://scala-cli.virtuslab.org//docs/getting_started"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Getting started | Scala CLI"><meta data-react-helmet="true" name="description" content="This article requires knowledge of Scala language (how to define class or method) as well as Scala tooling (repl, basics of dependency management and unit tests)."><meta data-react-helmet="true" property="og:description" content="This article requires knowledge of Scala language (how to define class or method) as well as Scala tooling (repl, basics of dependency management and unit tests)."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://scala-cli.virtuslab.org//docs/getting_started"><link data-react-helmet="true" rel="alternate" href="https://scala-cli.virtuslab.org//docs/getting_started" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://scala-cli.virtuslab.org//docs/getting_started" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><script data-react-helmet="true">!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-5TZTCGF",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.b044197b.css">
<link rel="preload" href="/assets/js/runtime~main.fefc9257.js" as="script">
<link rel="preload" href="/assets/js/main.6bb8b496.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Scala Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.svg" alt="Scala Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Scala CLI</b></a><a class="navbar__item navbar__link" href="/install">Installation</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current="page" class="navbar__link" href="/#use_cases">Use cases</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/education">Education</a></li><li><a class="dropdown__link" href="/scripting">Scripting</a></li><li><a class="dropdown__link" href="/prototyping">prototyping, experimenting, reproducing</a></li><li><a class="dropdown__link" href="/projects">Single-module projects</a></li></ul></div><a class="navbar__item navbar__link navbar__link--active" href="/docs/overview">Documentation</a><a class="navbar__item navbar__link" href="/docs/commands/basics">Commands</a><a class="navbar__item navbar__link" href="/docs/guides/intro">Guides</a><a class="navbar__item navbar__link" href="/docs/cookbooks/intro">Cookbook</a></div><div class="navbar__items navbar__items--right"><a href="https://virtuslab.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-vl-link" aria-label="GitHub repository"><span>by<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/Virtuslab/scala-cli" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/getting_started">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Commands</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cookbook</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/under-the-hood">Under the hood</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Getting started</h1></header><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>This article requires knowledge of Scala language (how to define class or method) as well as Scala tooling (repl, basics of dependency management and unit tests). </p></div></div><p>In this article we will show how to use Scala CLI to create basic script followed by small project with things like dependencies, tests and IDE support. We aime to provide you with a knowledge how to create and develop your first projects using Scala CLI.</p><p>Firstly, lets verify if Scala CLI is properly <a href="/install">installed</a> with a simple hello world command:</p><div class="runnable-command"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;println(&quot;Hello&quot;)&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> scala-cli -</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Hello</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><p>Running the command for the first time may take a bit longer then usual and print a bit logs because Scala CLI needs to download all artifacts needed to compile and run the code.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="scripting">Scripting<a aria-hidden="true" class="hash-link" href="#scripting" title="Direct link to heading">â€‹</a></h2><p>In fact, we have just created a Scala Script, so let&#x27;s create a script in a hello.sc file, that will actually greet properly.</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">hello.sc</div><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">def helloMessage(names: Seq[String]) = names match</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Nil =&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Hello!&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case names =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    names.mkString(&quot;Hello: &quot;, &quot;, &quot;, &quot;!&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println(helloMessage(args.toSeq))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now let run it with:</p><div class="runnable-command"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">scala-cli hello.sc</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Hello</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><p>To provide arguments to the script we need to add them after <code>--</code>:</p><div class="runnable-command"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">scala-cli hello.sc -- Jenny Jake</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Hello Jenny, Jake!</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><p>You may wonder what kind of Scala version was used under the hood. The answer is the latest stable one. If we want to specify the Scala version we can use <code>-S</code> or <code>--scala</code> option. More about setting Scala version in a dedicated <a href="/docs/cookbooks/scala-versions">cookbook</a>.</p><p>Scala CLI offers much more features dedicated for scripting described in the <a href="/docs/guides/scripts">dedicated guide</a></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="dependencies">Dependencies<a aria-hidden="true" class="hash-link" href="#dependencies" title="Direct link to heading">â€‹</a></h2><p>Let&#x27;s build something more serious. Best start is prototyping inside REPL. We can start a repl by simply running <code>scala-cli repl</code> and here we can also set a Scala version with <code>-S</code> or <code>--scala</code>.</p><p>*Scala CLI reuses most of its options across all its comments.**</p><p>One of the main strengths of Scala is its ecosystem. Scala CLI is designed in a way to expose Scala Ecosystem to all usages of Scala and running REPL is no exception. </p><p>Let&#x27;s start prototyping with <a href="https://github.com/com-lihaoyi/os-lib" target="_blank" rel="noopener noreferrer">os-lib</a> - a Scala interface to common OS filesystem and subprocess. To experiment with <code>os-lib</code> in repl we simply need to add a parameter <code>--dep com.lihaoyi::os-lib:0.7.8</code></p><div class="runnable-command"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">scala-cli repl --dep com.lihaoyi::os-lib:0.7.8</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">scala&gt; os.pwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val res0: os.Path = ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scala&gt; os.walk(os.pwd)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val res1: IndexedSeq[os.Path] = ArraySeq(...)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="a-project">A project<a aria-hidden="true" class="hash-link" href="#a-project" title="Direct link to heading">â€‹</a></h2><p>Now is time to write some logic, based on the prototyping we have just did: a filter function to display all files with given extension in current directory. </p><p>For the consistency of our results let&#x27;s create a new directory and <code>cd</code> to it:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> scala-cli-getting-started</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> scala-cli-getting-started</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now we can write our logic in <code>files.scala</code>:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">files.scala</div><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// using lib com.lihaoyi::os-lib:0.7.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def filesByExtension(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  extension: String, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dir: os.Path = os.pwd): Seq[os.Path] = </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    os.walk(dir).filter { f =&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      f.last.endsWith(s&quot;.$extension&quot;) &amp;&amp; os.isFile(f)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>As you may have noticed we specified a dependency within the <code>.scala</code> using <code>// using lib com.lihaoyi::os-lib:0.7.8</code>. In Scala CLI configuration can be provided through so called using directives - a dedicated syntax that can be embedded in any <code>.scala</code> file. We have a dedicated <a href="/docs/guides/using-directives">guide for using directives</a>.</p><p>Let&#x27;s check if our code compiles. We can do that by simply running:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">scala-cli compile </span><span class="token builtin class-name">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This time we did not provide path to single files but rather used a (current) directory. For project-like use-cases we recommend providing directories rather then individual files. More most cases a current directory (<code>.</code>) is best choice.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="ide-support">IDE support<a aria-hidden="true" class="hash-link" href="#ide-support" title="Direct link to heading">â€‹</a></h2><p>Some people are fine working using command line only, but most Scala Developers use an IDE. Let&#x27;s open Metals with your favorite editor inside <code>scala-cli-getting-started</code> directory.</p><div style="width:100%;height:"></div><p>At this moment support for IntelliJ is often problematic. We are working on making it as rock solid as Metals one.</p><p>Actually, we&#x27;ve cheated a bit by running compilation first. In order for Metals or IntelliJ to pick up Scala CLI project we need to generate a BSP connection detail file. Scala CLI generate such details by default every time <code>compile</code>, <code>run</code> or <code>test</code> are run. We expose a <code>setup-ide</code> command to manually control creation of connection details file. You can find more details in  <a href="/docs/guides/ide">IDE guide</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="tests">Tests<a aria-hidden="true" class="hash-link" href="#tests" title="Direct link to heading">â€‹</a></h2><p>With IDE in place, how can we test if our code works correctly? Best way is to create unit test. The simplest way to add a test using scala-cli is by creating a file named that it ends with <code>.test.scala</code> like <code>files.test.scala</code>. There are also other ways to mark source a test described in <a href="/docs/commands/test#test-sources">tests guide</a>.</p><p>We also need to add a test framework. Scala CLI support most popular test frameworks and for this guide we will stick to <a href="https://scalameta.org/munit/" target="_blank" rel="noopener noreferrer">munit</a>. To add a test framework we just need an ordinary dependency that we will add with <code>using</code> directive again:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">files.test.scala</div><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// using lib org.scalameta::munit:1.0.0-M1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class TestSuite extends munit.FunSuite {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test(&quot;hello&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val expected = Seq(&quot;files.scala&quot;, &quot;files.test.scala&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    val obtained = filesByExtension(&quot;scala&quot;).map(_.last)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertEquals(obtained, expected)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now we can run our tests in command line:   </p><div class="runnable-command"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">scala-cli </span><span class="token builtin class-name">test</span><span class="token plain"> </span><span class="token builtin class-name">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Compiling project (test, Scala 3.0.2, JVM)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Compiled project (test, Scala 3.0.2, JVM)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TestSuite:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  + hello 0.058s</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><p>or directly within Metals:</p><div style="width:100%;height:"></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="a-project-vol-2">A project, vol 2<a aria-hidden="true" class="hash-link" href="#a-project-vol-2" title="Direct link to heading">â€‹</a></h2><p>With our code ready and tested it is now time to turn it into a command-line tool to count files by extension. For that we can write a simple script. With Scala CLI, scripts and scala sources can be mixed.</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">countByExtension.sc</div><div class="codeBlockContent_hGly scala"><pre tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">val (ext, directory) = args.toSeq match </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Seq(ext) =&gt; (ext, os.pwd)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case Seq(ext, directory) =&gt; (ext, os.Path(directory))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  case other =&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println(s&quot;Expected: `extension [directory]` but get: `${other.mkString(&quot; &quot;)}`&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sys.exit(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val files = filesByExtension(ext, directory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">files.map(_.relativeTo(directory)).foreach(println)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>As you probably noticed, we are using <code>os-lib</code> in our script without any using directive, how is that possible? Actually, configuration provided by using directives are global and applies to all files. Since <code>files.scala</code> and <code>countByExtension.sc</code> are compiled together. Defining a library dependency in more then one file is an anti-pattern. </p><p>Let&#x27;s try it:</p><div class="runnable-command"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">scala-cli </span><span class="token builtin class-name">.</span><span class="token plain"> -- scala</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">files.scala</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.scala/project_940fb43dce/src_generated/main/countByExtension.scala</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">files.test.scala</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><p>Why do we have an additional <code>.scala</code> file inside <code>.scala</code> dir? Actually, under the hood, Scala CLI needs sometimes to preprocess provided source file (e.g. for scripts) and we compile such file from within <code>.scala</code> directory. </p><h2 class="anchor anchorWithStickyNavbar_31ik" id="packaging">Packaging<a aria-hidden="true" class="hash-link" href="#packaging" title="Direct link to heading">â€‹</a></h2><p>We could stop here and call scala-cli on set of sources every time. Scala CLI uses caches aggressively so rollup runs are reasonable fast (less around 1500 milliseconds on my machine) but sometimes it is not fast enough or shipping sources and compiling them may be not convenient.</p><p>Scala CLI offers means to package your project. We can simply run:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">scala-cli package </span><span class="token builtin class-name">.</span><span class="token plain"> -o countByExtension</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It will generate a thin, executable jar with the compiled code inside. We provided <code>-o</code> flag to customize the binary name (by default application is written as <code>app</code>). Now we can run our project with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">./countByExtension scala   </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This time it took 350 milliseconds so we have a big improvement. Created binary (a runnable jar) is self-contained and can be shipped to your colleagues or deployed.</p><p>We can reduce the start up time even further using <a href="/docs/guides/scala-native">Scala Native</a> or package our application to other formats like <a href="/docs/commands/package#docker-container">Docker container</a>, <a href="/docs/commands/package#assemblies">assembly</a> or even <a href="/docs/commands/package#os-specific-packages">os-specific packages</a> (.dep, .pgk etc.) All of this is outside of the scope of this guide.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="summary">Summary<a aria-hidden="true" class="hash-link" href="#summary" title="Direct link to heading">â€‹</a></h2><p>We&#x27;ve only scratch the surface what Scala CLI can do with this guide. We prepare a set of <a href="/docs/cookbooks/intro">cookbooks</a> showcasing solutions to some common problems as well as detailed set of <a href="/docs/guides/intro">guides</a> for our <a href="/docs/commands/basics">commands</a>. </p><p>We have a dedicated <a href="https://discord.gg/KzQdYkZZza" target="_blank" rel="noopener noreferrer">room on Scala discord</a> to ask for help or discuss anything that is Scala CLI related. For more in-depth discussion we are using <a href="https://github.com/VirtusLab/scala-cli/discussions" target="_blank" rel="noopener noreferrer">Github discussion in our repo</a> and this is a best place to suggest a new feature or an improvements.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Virtuslab/scala-cli/edit/master/website/docs/getting_started.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/commands/basics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Basics<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#scripting" class="table-of-contents__link toc-highlight">Scripting</a></li><li><a href="#dependencies" class="table-of-contents__link toc-highlight">Dependencies</a></li><li><a href="#a-project" class="table-of-contents__link toc-highlight">A project</a></li><li><a href="#ide-support" class="table-of-contents__link toc-highlight">IDE support</a></li><li><a href="#tests" class="table-of-contents__link toc-highlight">Tests</a></li><li><a href="#a-project-vol-2" class="table-of-contents__link toc-highlight">A project, vol 2</a></li><li><a href="#packaging" class="table-of-contents__link toc-highlight">Packaging</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/overview">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/ScreHFr957" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Virtuslab/scala-cli" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 VirtusLab Sp. z. o. o.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fefc9257.js"></script>
<script src="/assets/js/main.6bb8b496.js"></script>
</body>
</html>