"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9320],{9738(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"commands/export","title":"Export \u26a1\ufe0f","description":"In case your project outgrows the capabilities of Scala CLI (e.g support for modules) it may be beneficial","source":"@site/docs/commands/export.md","sourceDirName":"commands","slug":"/commands/export","permalink":"/docs/commands/export","draft":false,"unlisted":false,"editUrl":"https://github.com/Virtuslab/scala-cli/edit/main/website/docs/commands/export.md","tags":[],"version":"current","sidebarPosition":27,"frontMatter":{"title":"Export \u26a1\ufe0f","sidebar_position":27},"sidebar":"tutorialSidebar","previous":{"title":"Shebang","permalink":"/docs/commands/shebang"},"next":{"title":"Fix \u26a1\ufe0f","permalink":"/docs/commands/fix"}}');var o=s(4848),t=s(8453);const r={title:"Export \u26a1\ufe0f",sidebar_position:27},c="Exporting to SBT:",l={},a=[];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["In case your project outgrows the capabilities of Scala CLI (e.g support for modules) it may be beneficial\nto switch to a build tool such as SBT or Mill.\nThe ",(0,o.jsx)(n.code,{children:"export"})," sub-command allows to do that by converting a Scala CLI project into an SBT or Mill configuration.\nAdditionally the sub-command supports the JSON format for custom analysis of projects."]}),"\n",(0,o.jsxs)(n.p,{children:["Results of running the with ",(0,o.jsx)(n.code,{children:"--mill"})," or ",(0,o.jsx)(n.code,{children:"--sbt"})," sub-command are, by default, put in ",(0,o.jsx)(n.code,{children:"./dest/"}),",\nthat behaviour can be modified by specifying a path with the ",(0,o.jsx)(n.code,{children:"--output"})," option."]}),"\n",(0,o.jsxs)(n.p,{children:["The default behaviour of exporting with the ",(0,o.jsx)(n.code,{children:"--json"})," option is printing to standard output."]}),"\n",(0,o.jsxs)(n.admonition,{type:"caution",children:[(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"export"})," sub-command is restricted and requires setting the ",(0,o.jsx)(n.code,{children:"--power"})," option to be used.\nYou can pass it explicitly or set it globally by running:"]}),(0,o.jsx)(n.p,{children:"scala-cli config power true"})]}),"\n",(0,o.jsxs)(n.admonition,{type:"caution",children:[(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"export"})," sub-command is an experimental feature."]}),(0,o.jsxs)(n.p,{children:["Please bear in mind that non-ideal user experience should be expected.\nIf you encounter any bugs or have feedback to share, make sure to reach out to the maintenance team\non ",(0,o.jsx)(n.a,{href:"https://github.com/VirtusLab/scala-cli",children:"GitHub"}),"."]})]}),"\n",(0,o.jsxs)(n.p,{children:["The project configuration is read both from information specified in source files\nas well as options passed to the ",(0,o.jsx)(n.code,{children:"export"})," sub-command."]}),"\n",(0,o.jsx)(n.p,{children:"Let's take a simple one-file project as an example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-scala",metastring:"title=Hello.scala",children:"//> using scala 3.1.3\n//> using option -Xasync\n//> using dep com.lihaoyi::os-lib:0.9.0\n\nobject Hello {\n  def main(args: Array[String]): Unit =\n    println(os.pwd)\n}\n"})}),"\n",(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"exporting-to-sbt",children:"Exporting to SBT:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"scala-cli --power export Hello.scala --sbt\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Note that ",(0,o.jsx)(n.code,{children:"--sbt"})," is not required here since it's the default."]}),"\n",(0,o.jsxs)(n.p,{children:["The result is an sbt-compliant project created in the ",(0,o.jsx)(n.code,{children:"dest/"})," directory:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"dest\n\u251c\u2500\u2500 project\n\u2502   \u2514\u2500\u2500 build.properties\n\u251c\u2500\u2500 src\n\u2502   \u2514\u2500\u2500 main\n\u2502       \u2514\u2500\u2500 scala\n\u2502           \u2514\u2500\u2500 Hello.scala\n\u2514\u2500\u2500 build.sbt\n"})}),"\n",(0,o.jsxs)(n.p,{children:["All the project's configuration resides now in ",(0,o.jsx)(n.code,{children:"dest/build.sbt"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-scala",metastring:"title=dest/build.sbt",children:'scalaVersion := "3.1.3"\n\nscalacOptions ++= Seq("-Xasync")\n\nlibraryDependencies += "com.lihaoyi" %% "os-lib" % "0.9.0" \n\nlibraryDependencies += "com.lihaoyi" %% "os-lib" % "0.9.0" % Test\n\n'})}),"\n",(0,o.jsxs)(n.p,{children:["To configure the version of SBT used in the new project provide the ",(0,o.jsx)(n.code,{children:"--sbtVersion"})," option to the ",(0,o.jsx)(n.code,{children:"export"})," sub-command."]}),"\n",(0,o.jsx)(n.h1,{id:"exporting-to-mill",children:"Exporting to Mill:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"scala-cli --power export Hello.scala --mill --output=dest_mill\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Mill is not the default ",(0,o.jsx)(n.code,{children:"export"})," format, so passing the ",(0,o.jsx)(n.code,{children:"--mill"})," option is required."]}),"\n",(0,o.jsxs)(n.p,{children:["By specifying the path with ",(0,o.jsx)(n.code,{children:"--output"})," option the results are now created in ",(0,o.jsx)(n.code,{children:"dest_mill/"})," directory:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"dest_mill\n\u251c\u2500\u2500 project\n\u2502   \u2514\u2500\u2500 src\n\u2502       \u2514\u2500\u2500 Hello.scala\n\u251c\u2500\u2500 .mill-version\n\u251c\u2500\u2500 build.sc\n\u251c\u2500\u2500 mill\n\u2514\u2500\u2500 mill.bat\n"})}),"\n",(0,o.jsxs)(n.p,{children:["And all the project's configuration resides now in ",(0,o.jsx)(n.code,{children:"dest_mill/build.sc"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-scala",metastring:"title=dest_mill/build.sc",children:'import mill._\nimport mill.scalalib._\nobject project extends ScalaModule {\n  def scalaVersion = "3.1.3"\n  def scalacOptions = super.scalacOptions() ++ Seq("-Xasync")\n  def ivyDeps = super.ivyDeps() ++ Seq(\n    ivy"com.lihaoyi::os-lib:0.9.0"\n  )\n\n  object test extends Tests {\n    def ivyDeps = super.ivyDeps() ++ Seq(\n      ivy"com.lihaoyi::os-lib:0.9.0"\n    )\n  }\n}\n\n'})}),"\n",(0,o.jsxs)(n.p,{children:["The script files ",(0,o.jsx)(n.code,{children:"mill"})," and ",(0,o.jsx)(n.code,{children:"mill.bat"})," are mill wrappers fetched from ",(0,o.jsx)(n.a,{href:"https://github.com/com-lihaoyi/mill",children:"the Mill repository"}),".\nTo change the build tool version used override the contents of ",(0,o.jsx)(n.code,{children:"dest_mill/.mill-version"}),"."]}),"\n",(0,o.jsx)(n.h1,{id:"exporting-to-json",children:"Exporting to JSON:"}),"\n",(0,o.jsxs)(n.p,{children:["To export project information in a human-comprehensible format, use the ",(0,o.jsx)(n.code,{children:"--json"})," flag.\nBy default, exporting with the ",(0,o.jsx)(n.code,{children:"--json"})," option prints to standard output, this can be changed\nwith ",(0,o.jsx)(n.code,{children:"--output"})," parameter by specifying a directory where to create the ",(0,o.jsx)(n.code,{children:"export.json"})," file."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"scala-cli --power export Hello.scala --json --output=dest_json\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The result is the ",(0,o.jsx)(n.code,{children:"dest_json/export.json"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",metastring:"title=dest_json/export.json",children:'{\n "scalaVersion": "3.1.3",\n "platform": "JVM",\n "scopes": {\n  "main": {\n   "sources": [\n    "Foo.scala"\n   ],\n   "scalacOptions": [\n    "-Xasync"\n   ],\n   "dependencies": [\n    {\n     "groupId": "com.lihaoyi",\n     "artifactId": {\n      "name": "os-lib",\n      "fullName": "os-lib_3"\n     },\n     "version": "0.9.0"\n    }\n   ],\n   "resolvers": [\n    "https://repo1.maven.org/maven2",\n    "ivy:file:///Users/mgajek/Library/Caches/ScalaCli/local-repo/v0.1.20-111-648755-DIRTY2ba64fdc//[organisation]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext]",\n    "ivy:file:/Users/mgajek/.ivy2/local/[organisation]/[module]/(scala_[scalaVersion]/)(sbt_[sbtVersion]/)[revision]/[type]s/[artifact](-[classifier]).[ext]"\n   ]\n  }\n }\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>r,x:()=>c});var i=s(6540);const o={},t=i.createContext(o);function r(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);