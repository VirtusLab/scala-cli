"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[5654],{2267:(e,n,a)=>{a.d(n,{Z:()=>s,b:()=>i});a(6540);var t=a(9487),l=a(4848);function s({children:e}){return(0,l.jsx)("div",{className:"runnable-command",children:e})}function i({url:e}){return(0,l.jsx)(t.A,{playing:!0,loop:!0,muted:!0,controls:!0,width:"100%",height:"",url:e})}},8237:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"commands/repl","title":"REPL","description":"The repl command starts a Scala REPL, which lets you interactively run your code and inspect its results:","source":"@site/docs/commands/repl.md","sourceDirName":"commands","slug":"/commands/repl","permalink":"/docs/commands/repl","draft":false,"unlisted":false,"editUrl":"https://github.com/Virtuslab/scala-cli/edit/main/website/docs/commands/repl.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"title":"REPL","sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Test","permalink":"/docs/commands/test"},"next":{"title":"IDE Setup","permalink":"/docs/commands/setup-ide"}}');var l=a(4848),s=a(8453),i=a(2267);const r={title:"REPL",sidebar_position:8},c=void 0,o={},d=[{value:"Passing REPL options",id:"passing-repl-options",level:2},{value:"Using Toolkit in REPL",id:"using-toolkit-in-repl",level:2},{value:"Running snippets directly via the REPL",id:"running-snippets-directly-via-the-repl",level:3},{value:"Inject code as JAR file in class path",id:"inject-code-as-jar-file-in-class-path",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"repl"})," command starts a Scala REPL, which lets you interactively run your code and inspect its results:"]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:"scala-cli repl\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'scala> println("Hello Scala")\nHello Scala\n\nscala> :exit\n'})})]}),"\n",(0,l.jsx)(n.p,{children:"Scala CLI by default uses the normal Scala REPL."}),"\n",(0,l.jsxs)(n.p,{children:["If you prefer to use the ",(0,l.jsx)(n.a,{href:"https://ammonite.io/#Ammonite-REPL",children:"Ammonite REPL"}),", specify ",(0,l.jsx)(n.code,{children:"--amm"})," to launch it rather than the default REPL:"]}),"\n",(0,l.jsxs)(n.admonition,{type:"caution",children:[(0,l.jsxs)(n.p,{children:["Using the Ammonite REPL is restricted and requires setting the ",(0,l.jsx)(n.code,{children:"--power"})," option to be used.\nYou can pass it explicitly or set it globally by running:"]}),(0,l.jsx)(n.p,{children:"scala-cli config power true"})]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:"scala-cli --power repl --amm\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:'Loading...\nWelcome to the Ammonite Repl 2.4.0-23-76673f7f (Scala 3.0.2 Java 11.0.11)\n@ println("Hello ammonite")\nHello ammonite\n@ exit\nBye!\n'})})]}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"repl"})," command accepts the same arguments as the ",(0,l.jsx)(n.a,{href:"/docs/commands/compile",children:"compile"})," command. It first compiles any provided sources, and then exposes those results and any provided dependencies to the REPL session:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",metastring:"title=mylibrary/Messages.scala",children:'package mylibrary\n\nobject Messages {\n  def message = "Hello"\n  def print(): Unit = println(message)\n}\n'})}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:"scala-cli repl mylibrary/Messages.scala\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Compiling project (Scala 3.0.2, JVM)\nCompiled project (Scala 3.0.2, JVM)\nscala> import mylibrary._\n\nscala> Messages.print()\nHello\n\nscala> :quit\n"})})]}),"\n",(0,l.jsx)(n.h2,{id:"passing-repl-options",children:"Passing REPL options"}),"\n",(0,l.jsx)(n.p,{children:"It is also possible to manually pass REPL-specific options.\nIt can be done in a couple ways:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["after the ",(0,l.jsx)(n.code,{children:"--"})," separator, as the REPL itself is the launched app, so its options are app arguments"]}),"\n"]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:"scala repl -S 3.6.4-RC1 -- --repl-init-script 'println(\"Hello\")'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Hello\nWelcome to Scala 3.6.4-RC1 (23.0.1, Java OpenJDK 64-Bit Server VM).\nType in expressions for evaluation. Or try :help.\n                                                                                                                 \nscala> \n"})})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["with the ",(0,l.jsx)(n.code,{children:"-O"}),", effectively passing them as compiler options:"]}),"\n"]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:"scala repl -S 3.6.4-RC1 -O --repl-init-script -O 'println(\"Hello\")'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Hello\nWelcome to Scala 3.6.4-RC1 (23.0.1, Java OpenJDK 64-Bit Server VM).\nType in expressions for evaluation. Or try :help.\n                                                                                                                 \nscala> \n"})})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"via a using directive, treating them as Scala compiler options:"}),"\n"]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",metastring:"compile title=repl-options.scala",children:'//> using toolkit default\n//> using options --repl-init-script "import os.*; println(pwd)"\n'})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:"scala repl repl-options.scala\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"/current/directory/path\nWelcome to Scala 3.7.4 (17, Java OpenJDK 64-Bit Server VM).\nType in expressions for evaluation. Or try :help.\n                                                                         \nscala> pwd\nval res0: os.Path = /current/directory/path\nscala> :quit\n"})})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"directly, as a Scala CLI option (do note that newly added options from an RC version or a snapshot may not be supported this way just yet):"}),"\n"]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:"scala repl --repl-init-script 'println(\"Hello\")'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Hello\nWelcome to Scala 3.6.4-RC1 (23.0.1, Java OpenJDK 64-Bit Server VM).\nType in expressions for evaluation. Or try :help.\n                                                                         \nscala> pwd\nval res0: os.Path = /current/directory/path\nscala> :quit\n"})})]}),"\n",(0,l.jsx)(n.h2,{id:"using-toolkit-in-repl",children:"Using Toolkit in REPL"}),"\n",(0,l.jsxs)(n.p,{children:["It is also possible to start the scala-cli REPL with ",(0,l.jsx)(n.a,{href:"https://scala-cli.virtuslab.org/docs/guides/introduction/toolkit/",children:"toolkit"})," enabled"]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:"scala-cli repl --toolkit default\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Welcome to Scala 3.7.4 (17, Java OpenJDK 64-Bit Server VM).\nType in expressions for evaluation. Or try :help.\n                                                                                \nscala> import os.*\n                                                                                \nscala> os.pwd\nval res0: os.Path = /current/directory/path\nscala> :quit\n\n"})})]}),"\n",(0,l.jsxs)(n.p,{children:["Since we started the repl with toolkit enabled, we can use the libraries included in the toolkit directly. In the above example, the ",(0,l.jsx)(n.code,{children:"os-lib"})," library from the toolkit is used to print the current path."]}),"\n",(0,l.jsx)(n.h3,{id:"running-snippets-directly-via-the-repl",children:"Running snippets directly via the REPL"}),"\n",(0,l.jsxs)(n.p,{children:["It is possible to run code snippets via the REPL, with all the internal quirks of the REPL, rather than using standard runner execution.\nWhile the difference is subtle and should generally be invisible to users, it is useful for investigating REPL behavior.\nThe key to doing that is to use the both ",(0,l.jsx)(n.code,{children:"--repl-init-script"})," and ",(0,l.jsx)(n.code,{children:"--repl-quit-after-init"})," options together."]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala repl --repl-init-script 'println(42)' --repl-quit-after-init # runs in the REPL and quits immediately\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"42\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala repl -e '//> using options --repl-init-script \"println(42)\" --repl-quit-after-init' # same, but via using directive\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"42\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala -e 'println(42)' # standard runner equivalent\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"42\n"})})]}),"\n",(0,l.jsx)(n.h2,{id:"inject-code-as-jar-file-in-class-path",children:"Inject code as JAR file in class path"}),"\n",(0,l.jsxs)(n.p,{children:["If your application inspects its class path, and requires only JAR files in it, use ",(0,l.jsx)(n.code,{children:"--as-jar"})," to\nput the Scala CLI project in the class path as a JAR file rather than as a directory:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:"scala-cli repl Foo.scala --as-jar\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(p,{...e})}):p(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>r});var t=a(6540);const l={},s=t.createContext(l);function i(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),t.createElement(s.Provider,{value:n},e.children)}},9487:(e,n,a)=>{a.d(n,{A:()=>R});var t=a(6540);const l=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,s=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,i=/\.(m3u8)($|\?)/i,r=/\.(mpd)($|\?)/i,c=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,o=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,d=/vimeo\.com\/(?!progressive_redirect).+/,p=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,h=/open\.spotify\.com\/(\w+)\/(\w+)/i,u=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,m=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,y=(e,n)=>{if(Array.isArray(e)){for(const a of e){if("string"==typeof a&&y(a,n))return!0;if(y(a.src,n))return!0}return!1}return n(e)},g={html:e=>y(e,e=>l.test(e)||s.test(e)),hls:e=>y(e,e=>i.test(e)),dash:e=>y(e,e=>r.test(e)),mux:e=>c.test(e),youtube:e=>o.test(e),vimeo:e=>d.test(e)&&!s.test(e)&&!i.test(e),wistia:e=>p.test(e),spotify:e=>h.test(e),twitch:e=>u.test(e),tiktok:e=>m.test(e)};var x=t.forwardRef((e,n)=>{const a=l.test(`${e.src}`)?"audio":"video";return t.createElement(a,{...e,ref:n},e.children)});var j=[{key:"hls",name:"hls.js",canPlay:g.hls,canEnablePIP:()=>!0,player:(0,t.lazy)(()=>Promise.all([a.e(4243),a.e(4945),a.e(2262)]).then(a.bind(a,1833)))},{key:"dash",name:"dash.js",canPlay:g.dash,canEnablePIP:()=>!0,player:(0,t.lazy)(()=>Promise.all([a.e(4243),a.e(6395)]).then(a.bind(a,9380)))},{key:"mux",name:"Mux",canPlay:g.mux,canEnablePIP:()=>!0,player:(0,t.lazy)(()=>Promise.all([a.e(4243),a.e(4945),a.e(2723)]).then(a.bind(a,994)))},{key:"youtube",name:"YouTube",canPlay:g.youtube,player:(0,t.lazy)(()=>a.e(8446).then(a.bind(a,126)))},{key:"vimeo",name:"Vimeo",canPlay:g.vimeo,player:(0,t.lazy)(()=>a.e(6173).then(a.bind(a,9301)))},{key:"wistia",name:"Wistia",canPlay:g.wistia,canEnablePIP:()=>!0,player:(0,t.lazy)(()=>a.e(9340).then(a.bind(a,9971)))},{key:"spotify",name:"Spotify",canPlay:g.spotify,canEnablePIP:()=>!1,player:(0,t.lazy)(()=>a.e(2771).then(a.bind(a,9422)))},{key:"twitch",name:"Twitch",canPlay:g.twitch,canEnablePIP:()=>!1,player:(0,t.lazy)(()=>a.e(2042).then(a.bind(a,5946)))},{key:"tiktok",name:"TikTok",canPlay:g.tiktok,canEnablePIP:()=>!1,player:(0,t.lazy)(()=>a.e(8085).then(a.bind(a,3173)))},{key:"html",name:"html",canPlay:g.html,canEnablePIP:()=>!0,player:x}];const f={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},b=t.forwardRef((e,n)=>{const{playing:a,pip:l}=e,s=e.activePlayer,i=(0,t.useRef)(null),r=(0,t.useRef)(!0);(0,t.useEffect)(()=>{var n,t;i.current&&(i.current.paused&&!0===a&&i.current.play(),i.current.paused||!1!==a||i.current.pause(),i.current.playbackRate=null!=(n=e.playbackRate)?n:1,i.current.volume=null!=(t=e.volume)?t:1)}),(0,t.useEffect)(()=>{var e,n,a,t,s;if(i.current&&globalThis.document){if(l&&!document.pictureInPictureElement)try{null==(n=(e=i.current).requestPictureInPicture)||n.call(e)}catch(r){}if(!l&&document.pictureInPictureElement)try{null==(t=(a=i.current).exitPictureInPicture)||t.call(a),null==(s=document.exitPictureInPicture)||s.call(document)}catch(r){}}},[l]);if(!s)return null;const c={},o=["onReady","onStart"];for(const t in e)t.startsWith("on")&&!o.includes(t)&&(c[t]=e[t]);return t.createElement(s,{...c,style:e.style,className:e.className,slot:e.slot,ref:(0,t.useCallback)(e=>{i.current=e,"function"==typeof n?n(e):null!==n&&(n.current=e)},[n]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,disableRemotePlayback:e.disableRemotePlayback,config:e.config,onLoadStart:n=>{var a,t;r.current=!0,null==(a=e.onReady)||a.call(e),null==(t=e.onLoadStart)||t.call(e,n)},onPlay:n=>{var a,t;r.current&&(r.current=!1,null==(a=e.onStart)||a.call(e,n)),null==(t=e.onPlay)||t.call(e,n)}},e.children)});b.displayName="Player";var v=b;const P=(0,t.lazy)(()=>a.e(6353).then(a.bind(a,9543))),w=[],k=({children:e})=>e;var R=((e,n)=>{const a=t.forwardRef((a,l)=>{const s={...f,...a},{src:i,slot:r,className:c,style:o,width:d,height:p,fallback:h,wrapper:u}=s,[m,y]=(0,t.useState)(!!s.light);(0,t.useEffect)(()=>{s.light?y(!0):y(!1)},[s.light]);const g=e=>{var n;y(!1),null==(n=s.onClickPreview)||n.call(s,e)},x=null==u?k:u,j=!1===h?k:t.Suspense;return t.createElement(x,{slot:r,className:c,style:{width:d,height:p,...o}},t.createElement(j,{fallback:h},m?(e=>{if(!e)return null;const{light:n,playIcon:a,previewTabIndex:l,oEmbedUrl:i,previewAriaLabel:r}=s;return t.createElement(P,{src:e,light:n,playIcon:a,previewTabIndex:l,previewAriaLabel:r,oEmbedUrl:i,onClickPreview:g})})(i):(a=>{var i,o;const d=(a=>{for(const n of[...w,...e])if(a&&n.canPlay(a))return n;return n||null})(a);if(!d)return null;const{style:p,width:h,height:u,wrapper:m}=s,y=null==(i=s.config)?void 0:i[d.key];return t.createElement(v,{...s,ref:l,activePlayer:null!=(o=d.player)?o:d,slot:m?void 0:r,className:m?void 0:c,style:m?{display:"block",width:"100%",height:"100%"}:{display:"block",width:h,height:u,...p},config:y})})(i)))});return a.displayName="ReactPlayer",a.addCustomPlayer=e=>{w.push(e)},a.removeCustomPlayers=()=>{w.length=0},a.canPlay=n=>{if(n)for(const a of[...w,...e])if(a.canPlay(n))return!0;return!1},a.canEnablePIP=n=>{var a;if(n)for(const t of[...w,...e])if(t.canPlay(n)&&(null==(a=t.canEnablePIP)?void 0:a.call(t)))return!0;return!1},a})(j,j[j.length-1])}}]);