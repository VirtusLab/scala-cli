"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4884],{3319:(s,e,a)=>{a.r(e),a.d(e,{assets:()=>o,contentTitle:()=>t,default:()=>p,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"cookbooks/introduction/show-sources","title":"Accessing Source File Paths","description":"Source Names and Paths","source":"@site/docs/cookbooks/introduction/show-sources.md","sourceDirName":"cookbooks/introduction","slug":"/cookbooks/introduction/show-sources","permalink":"/docs/cookbooks/introduction/show-sources","draft":false,"unlisted":false,"editUrl":"https://github.com/Virtuslab/scala-cli/edit/main/website/docs/cookbooks/introduction/show-sources.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"title":"Accessing Source File Paths","sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"GitHub Actions","permalink":"/docs/cookbooks/introduction/gh-action"},"next":{"title":"VSCode setup","permalink":"/docs/cookbooks/ide/vscode"}}');var r=a(4848),c=a(8453);const i={title:"Accessing Source File Paths",sidebar_position:10},t=void 0,o={},l=[{value:"Source Names and Paths",id:"source-names-and-paths",level:2},{value:"System property <code>scala.source.names</code>",id:"system-property-scalasourcenames",level:3},{value:"System property <code>scala.sources</code>",id:"system-property-scalasources",level:3},{value:"Other examples",id:"other-examples",level:3}];function d(s){const e={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...s.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"source-names-and-paths",children:"Source Names and Paths"}),"\n",(0,r.jsxs)(e.p,{children:["System properties provide source file paths, separated by ",(0,r.jsx)(e.code,{children:"java.io.File.pathSeparator"}),"."]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"scala.source.names"})," filenames without a path."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"scala.sources"}),"  full paths to source files"]}),"\n"]}),"\n",(0,r.jsxs)(e.h3,{id:"system-property-scalasourcenames",children:["System property ",(0,r.jsx)(e.code,{children:"scala.source.names"})]}),"\n",(0,r.jsx)(e.p,{children:"This simple script reports the script file name:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-scala",metastring:"title=reportNames.sc",children:'val name = sys.props("scala.source.names")\nprintln(s"scriptName: $name")\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"scala-cli reportNames.sc\n# scriptName: reportNames.sc\n"})}),"\n",(0,r.jsxs)(e.p,{children:["Likewise, for this ",(0,r.jsx)(e.code,{children:".scala"})," program:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-scala",metastring:"title=SourceNames.scala",children:'object Main {\n  def main(args: Array[String]): Unit =\n    val names = sys.props("scala.source.names")\n    println(names)\n}\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"scala-cli SourceNames.scala\n# SourceNames.scala\n"})}),"\n",(0,r.jsx)(e.p,{children:"This java program prints a comma-separated list of source names:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:"title=NamesLister.java",children:'public class NamesLister {\n  public static void main(String[] args) {\n    String sourceNames = System.getProperty("scala.source.names");\n    String[] names = sourceNames.split(java.io.File.pathSeparator);\n    String list = String.join(",", names);\n    System.out.printf("%s\\n", list);\n  }\n}\n\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"scala-cli NamesLister.java\n# NamesLister.java\n"})}),"\n",(0,r.jsx)(e.p,{children:"If multiple sources are provided, all are displayed:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"scala-cli NamesLister.java reportNames.sc SourceNames.scala --main-class NamesLister\n# NamesLister.java,reportNames.sc,SourceNames.scala\n"})}),"\n",(0,r.jsxs)(e.h3,{id:"system-property-scalasources",children:["System property ",(0,r.jsx)(e.code,{children:"scala.sources"})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",metastring:"title=PathsLister.java",children:'public class PathsLister {\n  public static void main(String[] args) {\n    String paths = System.getProperty("scala.sources");\n    String list = String.join(",", paths.split(java.io.File.pathSeparator));\n    System.out.printf("%s\\n", list);\n  }\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:'The property "scala.sources" displays full source file paths:'}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"scala-cli PathsLister.java reportNames.sc SourceNames.scala --main-class PathsLister\n# /tmp/workdir/PathsLister.java,/tmp/workdir/reportNames.sc,/tmp/workdir/SourceNames.scala\n"})}),"\n",(0,r.jsx)(e.h3,{id:"other-examples",children:"Other examples"}),"\n",(0,r.jsxs)(e.p,{children:["When multiple ",(0,r.jsx)(e.code,{children:".md"})," files with plain ",(0,r.jsx)(e.code,{children:"scala"})," snippets are being run, names and paths can refer to '.md' files:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-markdown",metastring:"title=MainA.md",children:'# Main class A\n```scala\nprintln(s"A: ${sys.props("scala.source.names")}")\n```\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-markdown",metastring:"title=MainB.md",children:'# Main class 2\n```scala\nprintln(s"2: ${sys.props("scala.source.names")}")\n```\n'})}),"\n",(0,r.jsxs)(e.p,{children:["When multiple such sources are passed as inputs, the main class has to be passed explicitly with the ",(0,r.jsx)(e.code,{children:"--main-class"}),"\noption."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"scala-cli --power MainA.md MainB.md --main-class MainA_md\n# A: MainA.md:MainB.md\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-text",children:"1: MainA.md:MainB.md\n"})})]})}function p(s={}){const{wrapper:e}={...(0,c.R)(),...s.components};return e?(0,r.jsx)(e,{...s,children:(0,r.jsx)(d,{...s})}):d(s)}},8453:(s,e,a)=>{a.d(e,{R:()=>i,x:()=>t});var n=a(6540);const r={},c=n.createContext(r);function i(s){const e=n.useContext(c);return n.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function t(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(r):s.components||r:i(s.components),n.createElement(c.Provider,{value:e},s.children)}}}]);