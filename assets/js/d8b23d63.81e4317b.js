"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[6779],{7336(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"guides/advanced/snippets","title":"Snippets","description":"Instead of passing paths to your sources, you can also pass the code itself with the appropriate option.","source":"@site/docs/guides/advanced/snippets.md","sourceDirName":"guides/advanced","slug":"/guides/advanced/snippets","permalink":"/docs/guides/advanced/snippets","draft":false,"unlisted":false,"editUrl":"https://github.com/Virtuslab/scala-cli/edit/main/website/docs/guides/advanced/snippets.md","tags":[],"version":"current","sidebarPosition":43,"frontMatter":{"title":"Snippets","sidebar_position":43},"sidebar":"tutorialSidebar","previous":{"title":"Piping","permalink":"/docs/guides/advanced/piping"},"next":{"title":"Custom Toolkit","permalink":"/docs/guides/advanced/custom-toolkit"}}');var l=s(4848),t=s(8453),i=s(2267);const r={title:"Snippets",sidebar_position:43},c="Snippets",o={},p=[{value:"Examples",id:"examples",level:2},{value:"Snippets and other kinds of inputs",id:"snippets-and-other-kinds-of-inputs",level:2},{value:"Referring to code from a snippet",id:"referring-to-code-from-a-snippet",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"snippets",children:"Snippets"})}),"\n",(0,l.jsx)(n.p,{children:"Instead of passing paths to your sources, you can also pass the code itself with the appropriate option."}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala-cli run --scala-snippet '@main def hello() = println(\"Hello\")'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello\n"})})]}),"\n",(0,l.jsx)(n.p,{children:"You can also divide your code into multiple snippets when passing it this way. Each snippet is then treated as a\nseparate input by Scala CLI."}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala-cli run --scala-snippet '@main def main() = println(Messages.hello)' --scala-snippet 'object Messages { def hello = \"Hello\" }'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello\n"})})]}),"\n",(0,l.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"scripts"}),"\n"]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala-cli run -e 'println(\"Hello\")'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello\n"})})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Scala code"}),"\n"]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala-cli run --scala-snippet '@main def hello() = println(\"Hello\")'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello\n"})})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Java code"}),"\n"]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala-cli run --java-snippet 'class Hello { public static void main(String args[]) { System.out.println(\"Hello\"); } }'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello\n"})})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Markdown code (experimental)"}),"\n"]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala-cli run --markdown-snippet '# Markdown snippet\nwith a code block\n```scala\nprintln(\"Hello\")\n```'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello\n"})})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"a mix of Scala, Java and scripts"}),"\n"]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala-cli run --scala-snippet '@main def hello() = println(s\"${JavaSnippet.hello} ${snippet.world}\")' --java-snippet 'public class JavaSnippet { public static String hello = \"Hello\"; }' --script-snippet 'def world = \"world\"'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello world\n"})})]}),"\n",(0,l.jsx)(n.h2,{id:"snippets-and-other-kinds-of-inputs",children:"Snippets and other kinds of inputs"}),"\n",(0,l.jsx)(n.p,{children:"It is also possible to mix snippets with on-disk sources."}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",metastring:"title=Main.scala",children:"object Main extends App {\n  val snippetData = SnippetData()\n  println(snippetData.value)\n}\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala-cli Main.scala --scala-snippet 'case class SnippetData(value: String = \"Hello\")'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello\n"})})]}),"\n",(0,l.jsx)(n.p,{children:"Or even with piped ones, why not."}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"echo 'println(SnippetData().value)' ||  scala-cli _.sc --scala-snippet 'case class SnippetData(value: String = \"Hello\")'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello\n"})})]}),"\n",(0,l.jsx)(n.p,{children:"Nothing stops you from mixing everything all at once, really."}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",metastring:"title=Main.scala",children:'object Main extends App {\n  val scalaSnippetString = ScalaSnippet().value\n  val javaSnippetString = JavaSnippet.data\n  val scriptSnippetString = snippet.script\n  val pipedInputString = stdin.piped\n  val ondiskScriptString = ondisk.script\n  println(s"Output: $scalaSnippetString $javaSnippetString $scriptSnippetString $pipedInputString")\n}\n'})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",metastring:"title=ondisk.sc",children:'def script = "on-disk-script"\n'})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"echo 'def piped = \"piped-script\"'|scala-cli . _.sc --scala-snippet 'case class ScalaSnippet(value: String = \"scala-snippet\")' --java-snippet 'public class JavaSnippet { public static String data = \"java-snippet\"; }' --script-snippet 'def script = \"script-snippet\"'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Output: scala-snippet java-snippet script-snippet piped-script\n"})})]}),"\n",(0,l.jsx)(n.h2,{id:"referring-to-code-from-a-snippet",children:"Referring to code from a snippet"}),"\n",(0,l.jsxs)(n.p,{children:["When referring to code coming from a script snippet passed with ",(0,l.jsx)(n.code,{children:"--script-snippet"})," (or ",(0,l.jsx)(n.code,{children:"-e"}),"), you use its wrapper\nname: ",(0,l.jsx)(n.code,{children:"snippet"})]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala-cli run --scala-snippet '@main def main() = println(snippet.hello)' --script-snippet 'def hello: String = \"Hello\"'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello\n"})})]}),"\n",(0,l.jsxs)(n.p,{children:["When referring to code coming from multiple script snippets, you use their wrapper names according to the order they\nwere passed (starting from 0 for the first script snippet): ",(0,l.jsx)(n.code,{children:"snippet${snippetNumber}"}),". The ",(0,l.jsx)(n.code,{children:"snippetNumber"})," is omitted\nfor the first script snippet (0). In other words, the first passed snippet is just ",(0,l.jsx)(n.code,{children:"snippet"}),", the second is ",(0,l.jsx)(n.code,{children:"snippet1"}),",\nthen ",(0,l.jsx)(n.code,{children:"snippet2"})," and so on, as in the example:"]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala-cli run --scala-snippet '@main def main() = println(s\"${snippet.hello} ${snippet1.world}${snippet2.exclamation}\")' --script-snippet 'def hello: String = \"Hello\"' --script-snippet 'def world: String = \"world\"' --script-snippet 'def exclamation: String = \"!\"'\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello world!\n"})})]}),"\n",(0,l.jsxs)(n.p,{children:["This is similar to how you refer to code from piped scripts through their wrapper name (",(0,l.jsx)(n.code,{children:"stdin"}),"), more on which can be\nfound in ",(0,l.jsx)(n.a,{href:"/docs/guides/scripting/scripts",children:"the scripts guide"}),"."]}),"\n",(0,l.jsxs)(n.p,{children:["In fact, you can refer to both kinds of scripts at one time, just keep in mind that you need to pick which script is to\nactually be run with the ",(0,l.jsx)(n.code,{children:"--main-class"})," option when multiple scripts are present on the classpath (and no non-script\nmain class was passed)."]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",metastring:"title=ondisk.sc",children:'println(s"${stdin.hello} ${snippet.world}${snippet1.exclamation}")\n'})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"echo 'def hello = \"Hello\"' | scala-cli _.sc ondisk.sc -e 'def world = \"world\"' -e 'def exclamation = \"!\"' --main-class ondisk_sc\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello world!\n"})})]}),"\n",(0,l.jsxs)(n.p,{children:["When in doubt on what main classes are available on the classpath, you can always refer to the output\nof ",(0,l.jsx)(n.code,{children:"--list-main-classes"})]}),"\n",(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"echo 'def hello = \"Hello\"' | scala-cli _.sc ondisk.sc -e 'def world = \"world\"' -e 'def exclamation = \"!\"' --list-main-classes\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"ondisk_sc snippet_sc stdin_sc\n"})})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},2267(e,n,s){s.d(n,{Z:()=>t,b:()=>i});s(6540);var a=s(9487),l=s(4848);function t({children:e}){return(0,l.jsx)("div",{className:"runnable-command",children:e})}function i({url:e}){return(0,l.jsx)(a.A,{playing:!0,loop:!0,muted:!0,controls:!0,width:"100%",height:"",url:e})}},8453(e,n,s){s.d(n,{R:()=>i,x:()=>r});var a=s(6540);const l={},t=a.createContext(l);function i(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),a.createElement(t.Provider,{value:n},e.children)}},9487(e,n,s){s.d(n,{A:()=>S});var a=s(6540);const l=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,t=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,i=/\.(m3u8)($|\?)/i,r=/\.(mpd)($|\?)/i,c=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,o=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,p=/vimeo\.com\/(?!progressive_redirect).+/,d=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,h=/open\.spotify\.com\/(\w+)\/(\w+)/i,u=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,m=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,x=(e,n)=>{if(Array.isArray(e)){for(const s of e){if("string"==typeof s&&x(s,n))return!0;if(x(s.src,n))return!0}return!1}return n(e)},g={html:e=>x(e,e=>l.test(e)||t.test(e)),hls:e=>x(e,e=>i.test(e)),dash:e=>x(e,e=>r.test(e)),mux:e=>c.test(e),youtube:e=>o.test(e),vimeo:e=>p.test(e)&&!t.test(e)&&!i.test(e),wistia:e=>d.test(e),spotify:e=>h.test(e),twitch:e=>u.test(e),tiktok:e=>m.test(e)};var j=a.forwardRef((e,n)=>{const s=l.test(`${e.src}`)?"audio":"video";return a.createElement(s,{...e,ref:n},e.children)});var f=[{key:"hls",name:"hls.js",canPlay:g.hls,canEnablePIP:()=>!0,player:(0,a.lazy)(()=>Promise.all([s.e(4243),s.e(4945),s.e(2262)]).then(s.bind(s,1833)))},{key:"dash",name:"dash.js",canPlay:g.dash,canEnablePIP:()=>!0,player:(0,a.lazy)(()=>Promise.all([s.e(4243),s.e(6395)]).then(s.bind(s,9380)))},{key:"mux",name:"Mux",canPlay:g.mux,canEnablePIP:()=>!0,player:(0,a.lazy)(()=>Promise.all([s.e(4243),s.e(4945),s.e(2723)]).then(s.bind(s,994)))},{key:"youtube",name:"YouTube",canPlay:g.youtube,player:(0,a.lazy)(()=>s.e(8446).then(s.bind(s,126)))},{key:"vimeo",name:"Vimeo",canPlay:g.vimeo,player:(0,a.lazy)(()=>s.e(6173).then(s.bind(s,9301)))},{key:"wistia",name:"Wistia",canPlay:g.wistia,canEnablePIP:()=>!0,player:(0,a.lazy)(()=>s.e(9340).then(s.bind(s,9971)))},{key:"spotify",name:"Spotify",canPlay:g.spotify,canEnablePIP:()=>!1,player:(0,a.lazy)(()=>s.e(2771).then(s.bind(s,9422)))},{key:"twitch",name:"Twitch",canPlay:g.twitch,canEnablePIP:()=>!1,player:(0,a.lazy)(()=>s.e(2042).then(s.bind(s,5946)))},{key:"tiktok",name:"TikTok",canPlay:g.tiktok,canEnablePIP:()=>!1,player:(0,a.lazy)(()=>s.e(8085).then(s.bind(s,3173)))},{key:"html",name:"html",canPlay:g.html,canEnablePIP:()=>!0,player:j}];const y={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},b=a.forwardRef((e,n)=>{const{playing:s,pip:l}=e,t=e.activePlayer,i=(0,a.useRef)(null),r=(0,a.useRef)(!0);(0,a.useEffect)(()=>{var n,a;i.current&&(i.current.paused&&!0===s&&i.current.play(),i.current.paused||!1!==s||i.current.pause(),i.current.playbackRate=null!=(n=e.playbackRate)?n:1,i.current.volume=null!=(a=e.volume)?a:1)}),(0,a.useEffect)(()=>{var e,n,s,a,t;if(i.current&&globalThis.document){if(l&&!document.pictureInPictureElement)try{null==(n=(e=i.current).requestPictureInPicture)||n.call(e)}catch(r){}if(!l&&document.pictureInPictureElement)try{null==(a=(s=i.current).exitPictureInPicture)||a.call(s),null==(t=document.exitPictureInPicture)||t.call(document)}catch(r){}}},[l]);if(!t)return null;const c={},o=["onReady","onStart"];for(const a in e)a.startsWith("on")&&!o.includes(a)&&(c[a]=e[a]);return a.createElement(t,{...c,style:e.style,className:e.className,slot:e.slot,ref:(0,a.useCallback)(e=>{i.current=e,"function"==typeof n?n(e):null!==n&&(n.current=e)},[n]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,disableRemotePlayback:e.disableRemotePlayback,config:e.config,onLoadStart:n=>{var s,a;r.current=!0,null==(s=e.onReady)||s.call(e),null==(a=e.onLoadStart)||a.call(e,n)},onPlay:n=>{var s,a;r.current&&(r.current=!1,null==(s=e.onStart)||s.call(e,n)),null==(a=e.onPlay)||a.call(e,n)}},e.children)});b.displayName="Player";var v=b;const w=(0,a.lazy)(()=>s.e(6353).then(s.bind(s,9543))),k=[],P=({children:e})=>e;var S=((e,n)=>{const s=a.forwardRef((s,l)=>{const t={...y,...s},{src:i,slot:r,className:c,style:o,width:p,height:d,fallback:h,wrapper:u}=t,[m,x]=(0,a.useState)(!!t.light);(0,a.useEffect)(()=>{t.light?x(!0):x(!1)},[t.light]);const g=e=>{var n;x(!1),null==(n=t.onClickPreview)||n.call(t,e)},j=null==u?P:u,f=!1===h?P:a.Suspense;return a.createElement(j,{slot:r,className:c,style:{width:p,height:d,...o}},a.createElement(f,{fallback:h},m?(e=>{if(!e)return null;const{light:n,playIcon:s,previewTabIndex:l,oEmbedUrl:i,previewAriaLabel:r}=t;return a.createElement(w,{src:e,light:n,playIcon:s,previewTabIndex:l,previewAriaLabel:r,oEmbedUrl:i,onClickPreview:g})})(i):(s=>{var i,o;const p=(s=>{for(const n of[...k,...e])if(s&&n.canPlay(s))return n;return n||null})(s);if(!p)return null;const{style:d,width:h,height:u,wrapper:m}=t,x=null==(i=t.config)?void 0:i[p.key];return a.createElement(v,{...t,ref:l,activePlayer:null!=(o=p.player)?o:p,slot:m?void 0:r,className:m?void 0:c,style:m?{display:"block",width:"100%",height:"100%"}:{display:"block",width:h,height:u,...d},config:x})})(i)))});return s.displayName="ReactPlayer",s.addCustomPlayer=e=>{k.push(e)},s.removeCustomPlayers=()=>{k.length=0},s.canPlay=n=>{if(n)for(const s of[...k,...e])if(s.canPlay(n))return!0;return!1},s.canEnablePIP=n=>{var s;if(n)for(const a of[...k,...e])if(a.canPlay(n)&&(null==(s=a.canEnablePIP)?void 0:s.call(a)))return!0;return!1},s})(f,f[f.length-1])}}]);