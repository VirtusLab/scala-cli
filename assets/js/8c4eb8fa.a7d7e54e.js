"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2552],{1862:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"commands/misc/pgp","title":"PGP \u26a1\ufe0f","description":"The PGP command is restricted and requires setting the --power option to be used.","source":"@site/docs/commands/misc/pgp.md","sourceDirName":"commands/misc","slug":"/commands/misc/pgp","permalink":"/docs/commands/misc/pgp","draft":false,"unlisted":false,"editUrl":"https://github.com/Virtuslab/scala-cli/edit/main/website/docs/commands/misc/pgp.md","tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"title":"PGP \u26a1\ufe0f","sidebar_position":30},"sidebar":"tutorialSidebar","previous":{"title":"Default File \u26a1\ufe0f","permalink":"/docs/commands/misc/default-file"},"next":{"title":"Index","permalink":"/docs/guides/intro"}}');var r=i(4848),t=i(8453);const l={title:"PGP \u26a1\ufe0f",sidebar_position:30},c=void 0,a={},o=[{value:"Create key pairs",id:"create-key-pairs",level:2},{value:"Get the fingerprint of a public key",id:"get-the-fingerprint-of-a-public-key",level:2},{value:"Push public keys to key servers",id:"push-public-keys-to-key-servers",level:2},{value:"Pull public keys from key servers",id:"pull-public-keys-from-key-servers",level:2},{value:"Sign files",id:"sign-files",level:2},{value:"Verify signatures",id:"verify-signatures",level:2}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.admonition,{type:"caution",children:[(0,r.jsxs)(s.p,{children:["The PGP command is restricted and requires setting the ",(0,r.jsx)(s.code,{children:"--power"})," option to be used.\nYou can pass it explicitly or set it globally by running:"]}),(0,r.jsx)(s.p,{children:"scala-cli config power true"})]}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"pgp"})," sub-commands are low-level commands, exposing the PGP capabilities of\nScala CLI. These capabilities are used in the ",(0,r.jsx)(s.code,{children:"publish"})," and ",(0,r.jsx)(s.code,{children:"publish setup"})," commands\nin particular."]}),"\n",(0,r.jsx)(s.p,{children:"These commands make it possible to"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["create PGP keys with ",(0,r.jsx)(s.code,{children:"pgp create"})]}),"\n",(0,r.jsxs)(s.li,{children:["get a key fingerprint with ",(0,r.jsx)(s.code,{children:"pgp key-id"})]}),"\n",(0,r.jsxs)(s.li,{children:["push them to / pull them from key servers with ",(0,r.jsx)(s.code,{children:"pgp push"})," / ",(0,r.jsx)(s.code,{children:"pgp pull"})]}),"\n",(0,r.jsxs)(s.li,{children:["sign files with ",(0,r.jsx)(s.code,{children:"pgp sign"})]}),"\n",(0,r.jsxs)(s.li,{children:["verify signatures with ",(0,r.jsx)(s.code,{children:"pgp verify"})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["These capabilities rely on the ",(0,r.jsx)(s.a,{href:"https://www.bouncycastle.org",children:"Bouncy Castle library"}),".\nNote that sub-commands relying on signing, such as ",(0,r.jsx)(s.code,{children:"publish"}),", also allow signing\nto be handled using ",(0,r.jsx)(s.code,{children:"gpg"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"create-key-pairs",children:"Create key pairs"}),"\n",(0,r.jsx)(s.p,{children:"It's not mandatory, although recomended, to use a password to encrypt your keychains."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",children:"$ scala-cli pgp create --email alex@alex.me --password env:MY_PASSWORD\nWrote public key e259e7e8a23475b3 to key.pub\nWrote secret key to key.skr\n"})}),"\n",(0,r.jsxs)(s.p,{children:["See ",(0,r.jsx)(s.a,{href:"/docs/reference/password-options",children:"the dedicated page"})," for the various formats\naccepted by the ",(0,r.jsx)(s.code,{children:"--password"})," option."]}),"\n",(0,r.jsx)(s.h2,{id:"get-the-fingerprint-of-a-public-key",children:"Get the fingerprint of a public key"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",children:"$ scala-cli pgp key-id ./key.pub\ne259e7e8a23475b3\n"})}),"\n",(0,r.jsx)(s.h2,{id:"push-public-keys-to-key-servers",children:"Push public keys to key servers"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",children:"$ scala-cli pgp push key.pub\nKey 0xe259e7e8a23475b3 uploaded to http://keyserver.ubuntu.com:11371\n"})}),"\n",(0,r.jsx)(s.h2,{id:"pull-public-keys-from-key-servers",children:"Pull public keys from key servers"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",children:"$ scala-cli pgp pull 0x914d298df8fa4d20\n-----BEGIN PGP PUBLIC KEY BLOCK-----\n\u2026\n-----END PGP PUBLIC KEY BLOCK-----\n"})}),"\n",(0,r.jsx)(s.h2,{id:"sign-files",children:"Sign files"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",children:"$ scala-cli pgp sign --secret-key file:./key.skr --password value:1234 ./foo\n$ cat ./foo.asc\n-----BEGIN PGP MESSAGE-----\n\u2026\n-----END PGP MESSAGE-----\n\n$ scala-cli pgp sign --secret-key file:./key.skr --password value:1234 ./foo --stdout\n-----BEGIN PGP MESSAGE-----\n\u2026\n-----END PGP MESSAGE-----\n"})}),"\n",(0,r.jsx)(s.h2,{id:"verify-signatures",children:"Verify signatures"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",children:"$ scala-cli pgp verify --key key.pub foo.asc\nfoo.asc: valid signature\n"})})]})}function p(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,s,i)=>{i.d(s,{R:()=>l,x:()=>c});var n=i(6540);const r={},t=n.createContext(r);function l(e){const s=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),n.createElement(t.Provider,{value:s},e.children)}}}]);