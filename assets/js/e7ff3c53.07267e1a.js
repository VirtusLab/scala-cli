"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[449],{3171(e,o,n){n.r(o),n.d(o,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>t,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"guides/power/proxy","title":"HTTP Proxies \u26a1\ufe0f","description":"Scala CLI can download dependencies via HTTP proxies. Proxies can be setup in several ways:","source":"@site/docs/guides/power/proxy.md","sourceDirName":"guides/power","slug":"/guides/power/proxy","permalink":"/docs/guides/power/proxy","draft":false,"unlisted":false,"editUrl":"https://github.com/Virtuslab/scala-cli/edit/main/website/docs/guides/power/proxy.md","tags":[],"version":"current","sidebarPosition":51,"frontMatter":{"title":"HTTP Proxies \u26a1\ufe0f","sidebar_position":51},"sidebar":"tutorialSidebar","previous":{"title":"Offline mode \u26a1\ufe0f","permalink":"/docs/guides/power/offline"},"next":{"title":"Repositories \u26a1\ufe0f","permalink":"/docs/guides/power/repositories"}}');var s=n(4848),i=n(8453);const t={title:"HTTP Proxies \u26a1\ufe0f",sidebar_position:51},a=void 0,c={},p=[{value:"Java properties",id:"java-properties",level:2},{value:"Maven configuration file",id:"maven-configuration-file",level:2},{value:"Scala CLI configuration files",id:"scala-cli-configuration-files",level:2}];function l(e){const o={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.p,{children:"Scala CLI can download dependencies via HTTP proxies. Proxies can be setup in several ways:"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:"via Java properties"}),"\n",(0,s.jsx)(o.li,{children:"via the Maven configuration file (recommended for now)"}),"\n",(0,s.jsx)(o.li,{children:"via Scala CLI or coursier configuration files (soon)"}),"\n"]}),"\n",(0,s.jsx)(o.h2,{id:"java-properties",children:"Java properties"}),"\n",(0,s.jsxs)(o.p,{children:["It is possible to specify the proxy settings using Java properties. There are several ways to pass those to Scala CLI, ",(0,s.jsx)(o.a,{href:"/docs/guides/advanced/java-properties",children:"more information here"}),"."]}),"\n",(0,s.jsx)(o.p,{children:"The most basic way is to pass the Java properties directly to Scala CLI on the command line.\nKeep in mind that properties, put before the sub-command name and sources, are only passed to Scala CLI and not to the JVM executing user's code."}),"\n",(0,s.jsxs)(o.p,{children:["Example (notice the different name of the property depending on the protocol ",(0,s.jsx)(o.code,{children:"http"})," or ",(0,s.jsx)(o.code,{children:"https"}),"):"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{children:"$ scala-cli \\\n    -Dhttp.proxyProtocol=http -Dhttp.proxyHost=proxy.corp.com -Dhttp.proxyPort=8080 \\\n    -Dhttp.proxyUsername=alex -Dhttp.proxyPassword=1234 \\\n    -Dhttps.proxyProtocol=http -Dhttps.proxyHost=proxy.corp.com -Dhttps.proxyPort=8080 \\\n    -Dhttps.proxyUsername=alex -Dhttps.proxyPassword=1234 \\\n    run .\n"})}),"\n",(0,s.jsxs)(o.p,{children:["More information about the Java properties used for configuring proxies can be found ",(0,s.jsx)(o.a,{href:"https://docs.oracle.com/javase/8/docs/technotes/guides/net/proxies.html",children:"here"}),"."]}),"\n",(0,s.jsx)(o.h2,{id:"maven-configuration-file",children:"Maven configuration file"}),"\n",(0,s.jsxs)(o.p,{children:["This file lives at ",(0,s.jsx)(o.code,{children:"~/.m2/settings.xml"})]}),"\n",(0,s.jsx)(o.p,{children:"Example configuration file, without authentication:"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-xml",children:"<settings>\n  <proxies>\n    <proxy>\n      <id>test-proxy</id>\n      <protocol>http</protocol>\n      <host>proxy.corp.com</host>\n      <port>8080</port>\n    </proxy>\n  </proxies>\n</settings>\n"})}),"\n",(0,s.jsx)(o.p,{children:"Example configuration file, with authentication:"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-xml",children:"<settings>\n  <proxies>\n    <proxy>\n      <id>test-proxy</id>\n      <protocol>http</protocol>\n      <host>proxy.corp.com</host>\n      <port>8080</port>\n      <username>alex</username>\n      <password>1234</password>\n    </proxy>\n  </proxies>\n</settings>\n"})}),"\n",(0,s.jsxs)(o.p,{children:["The value in ",(0,s.jsx)(o.code,{children:"<protocol>\u2026</protocol>"})," is assumed to be the protocol of the proxy itself\n(can be either ",(0,s.jsx)(o.code,{children:"http"})," or ",(0,s.jsx)(o.code,{children:"https"}),", ",(0,s.jsx)(o.code,{children:"https"})," is assumed by default not to inadvertently leak\nproxy credentials)."]}),"\n",(0,s.jsx)(o.p,{children:"Such a proxy is used for both http and https by Scala CLI."}),"\n",(0,s.jsxs)(o.p,{children:["The ",(0,s.jsx)(o.a,{href:"https://github.com/coursier/coursier",children:"coursier"})," command-line and library also pick those credentials, since version ",(0,s.jsx)(o.code,{children:"2.1.0-M6-26-gcec901e9a"})," (2022/05/31)."]}),"\n",(0,s.jsx)(o.h2,{id:"scala-cli-configuration-files",children:"Scala CLI configuration files"}),"\n",(0,s.jsxs)(o.admonition,{type:"caution",children:[(0,s.jsxs)(o.p,{children:["Even though the ",(0,s.jsx)(o.code,{children:"config"})," command is not restricted, some available configuration keys may be, and thus may\nrequire setting the ",(0,s.jsx)(o.code,{children:"--power"})," option to be used.\nThat includes configuration keys tied to setting up proxies, like ",(0,s.jsx)(o.code,{children:"httpProxy.address"})," and others.\nYou can pass the ",(0,s.jsx)(o.code,{children:"--power"})," option explicitly or set it globally by running:"]}),(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-bash",metastring:"ignore",children:"scala-cli config power true\n"})})]}),"\n",(0,s.jsxs)(o.admonition,{type:"warning",children:[(0,s.jsx)(o.p,{children:"This way of configuring proxies is not recommended, since it will set up a proxy not only for Scala CLI, but for Coursier itself, which is used by other build tools like SBT.\nThis may result in unexpected behavior."}),(0,s.jsxs)(o.p,{children:["If using Scala CLI config is preferred, it's recommended to put the ",(0,s.jsx)(o.a,{href:"#java-properties",children:"relevant Java properties"})," into the ",(0,s.jsx)(o.code,{children:"config"})," with:"]}),(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-bash",metastring:"ignore",children:'    scala-cli --power config -i java.properties "http.proxyProtocol=http" "http.proxyHost=proxy.corp.com" "http.proxyPort=8080" "https.proxyUsername=alex" "https.proxyPassword=1234"\n'})}),(0,s.jsx)(o.p,{children:"The -D prefix can be dropped when writing properties to config."})]}),"\n",(0,s.jsxs)(o.p,{children:["Scala CLI configuration can also be used to configure proxies globally.\nTo do that use the ",(0,s.jsx)(o.code,{children:"config"})," command:"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-bash",metastring:"ignore",children:"scala-cli --power config httpProxy.address http://proxy.company.com:8081\n"})}),"\n",(0,s.jsxs)(o.p,{children:["Replace ",(0,s.jsx)(o.code,{children:"proxy.company.com"})," by the address of your proxy and append the port number with ",(0,s.jsx)(o.code,{children:":"})," if needed.\nAlso, change ",(0,s.jsx)(o.code,{children:"http://"})," to ",(0,s.jsx)(o.code,{children:"https://"})," in the address if your proxy is accessible via HTTPS."]}),"\n",(0,s.jsx)(o.p,{children:"If your proxy requires authentication, set your user and password with"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-bash",metastring:"ignore",children:"scala-cli --power config httpProxy.user value:_encoded_user_\nscala-cli --power config httpProxy.password value:_encoded_password_\n"})}),"\n",(0,s.jsxs)(o.p,{children:["Replace ",(0,s.jsx)(o.code,{children:"_encoded_user_"})," and ",(0,s.jsx)(o.code,{children:"_encoded_password_"})," by your actual user and password, following\nthe ",(0,s.jsx)(o.a,{href:"/docs/reference/password-options",children:"password option format"}),". They should typically look like\n",(0,s.jsx)(o.code,{children:"env:ENV_VAR_NAME"}),", ",(0,s.jsx)(o.code,{children:"file:/path/to/file"}),", or ",(0,s.jsx)(o.code,{children:"command:command to run"}),"."]})]})}function d(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453(e,o,n){n.d(o,{R:()=>t,x:()=>a});var r=n(6540);const s={},i=r.createContext(s);function t(e){const o=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(i.Provider,{value:o},e.children)}}}]);