"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1156],{1489:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>r,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var t=n(4848),s=n(8453),c=n(2267);const i={title:"Formatting",sidebar_position:5},o=void 0,l={id:"cookbooks/introduction/formatting",title:"Formatting",description:"Scala CLI also lets you format your code using the Scalafmt formatter.",source:"@site/docs/cookbooks/introduction/formatting.md",sourceDirName:"cookbooks/introduction",slug:"/cookbooks/introduction/formatting",permalink:"/docs/cookbooks/introduction/formatting",draft:!1,unlisted:!1,editUrl:"https://github.com/Virtuslab/scala-cli/edit/main/website/docs/cookbooks/introduction/formatting.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Formatting",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Debugging",permalink:"/docs/cookbooks/introduction/debugging"},next:{title:"Filter the test suites to run",permalink:"/docs/cookbooks/introduction/test-only"}},r={},d=[{value:"Basic usage",id:"basic-usage",level:2},{value:"Check",id:"check",level:3},{value:"Format",id:"format",level:3},{value:"Example",id:"example",level:3},{value:"Advanced usage",id:"advanced-usage",level:2},{value:"Default",id:"default",level:3},{value:"Custom config",id:"custom-config",level:3},{value:"Custom dialect",id:"custom-dialect",level:3},{value:"Custom version",id:"custom-version",level:3},{value:"Saving the configuration",id:"saving-the-configuration",level:3},{value:"Direct <code>scalafmt</code> arguments",id:"direct-scalafmt-arguments",level:3},{value:"See also",id:"see-also",level:2}];function h(e){const a={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.p,{children:["Scala CLI also lets you format your code using the ",(0,t.jsx)(a.a,{href:"https://scalameta.org/scalafmt/",children:"Scalafmt"})," formatter."]}),"\n",(0,t.jsx)(a.h2,{id:"basic-usage",children:"Basic usage"}),"\n",(0,t.jsx)(a.p,{children:"This section describes how to use Scala CLI to format your code using default rules. For advanced usage and all available flags, please see next section."}),"\n",(0,t.jsx)(a.h3,{id:"check",children:"Check"}),"\n",(0,t.jsx)(a.p,{children:"To check the format of all your sources in the current directory:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"scala-cli fmt --check .\n"})}),"\n",(0,t.jsx)(a.p,{children:"This command will check if the code is formatted correctly according to the default rules.\nIf it is not, it will return a diff of the changes that need to be made to match formatting rules."}),"\n",(0,t.jsx)(a.h3,{id:"format",children:"Format"}),"\n",(0,t.jsx)(a.p,{children:"If you want to format all your code, you can use the following command:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"scala-cli fmt .\n"})}),"\n",(0,t.jsx)(a.p,{children:"This command will format all your sources in the current directory according to the default rules."}),"\n",(0,t.jsx)(a.h3,{id:"example",children:"Example"}),"\n",(0,t.jsxs)(a.p,{children:["Let's take a simple ",(0,t.jsx)(a.code,{children:"HelloWorld"})," application:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-scala",metastring:"title=FormattingExample.scala reset",children:'// use scala 3.3.0\n@main def hello()={println("Hello, World!")}\ndef someLongMethodMoreThan80Characters():Unit={println("This is a long method")\nprintln("Another print here?")}\n'})}),"\n",(0,t.jsx)(a.p,{children:"You can notice that this implementation is written with long lines, no indentation, no spaces and no new lines.\nIt is hard to distinguish where one statement ends and another begins, which makes it hard to read."}),"\n",(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(a.p,{children:"Let's check the format of this code:"}),(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",metastring:"fail",children:"scala-cli fmt --check .\n"})}),(0,t.jsx)(a.p,{children:"Here is the output:"}),(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-diff",children:'--- a/private/tmp/formatting-example/FormattingExample.scala\n+++ b/private/tmp/formatting-example/FormattingExample.scala\n@@ -1,4 +1,7 @@\n // use scala 3.3.0\n-@main def hello()={println("Hello, World!")}\n-def someLongMethodMoreThan80Characters():Unit={println("This is a long method")\n-println("Another print here?")}\n+@main def hello() = { println("Hello, World!") }\n+def someLongMethodMoreThan80Characters(): Unit = {\n+  println("This is a long method")\n+  println("Another print here?")\n+}\n+\nerror: --test failed\n'})})]}),"\n",(0,t.jsxs)(a.p,{children:["As we can see, the code is not correctly formatted according to the default rules and ",(0,t.jsx)(a.a,{href:"https://scalameta.org/scalafmt/",children:"Scalafmt"})," formatter provides a diff of the changes that need to be made to match them."]}),"\n",(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(a.p,{children:"To apply the suggested changes to our code, we can run:"}),(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"scala-cli fmt .\n"})}),(0,t.jsx)(a.p,{children:"And there will be no output, which means that the formatting was successful. Let's see the code after formatting:"}),(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-scala",metastring:"title=FormattingExample2.scala reset",children:'// use scala 3.3.0\n@main def hello() = { println("Hello, World!") }\ndef someLongMethodMoreThan80Characters(): Unit = {\n  println("This is a long method")\n  println("Another print here?")\n}\n'})})]}),"\n",(0,t.jsx)(a.p,{children:"Now the code is formatted according to the default rules."}),"\n",(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(a.p,{children:"Let's check it again:"}),(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"scala-cli fmt --check .\n"})}),(0,t.jsxs)(a.p,{children:["And now we see ",(0,t.jsx)(a.code,{children:"All files are formatted with scalafmt :)"})," message, which means that the code is formatted correctly."]})]}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"advanced-usage",children:"Advanced usage"}),"\n",(0,t.jsxs)(a.p,{children:["This section describes how to use Scala CLI to format your code using custom parameters and the ",(0,t.jsx)(a.code,{children:".scalafmt.conf"})," file."]}),"\n",(0,t.jsx)(a.h3,{id:"default",children:"Default"}),"\n",(0,t.jsxs)(a.p,{children:["By default, Scala CLI creates a ",(0,t.jsx)(a.code,{children:".scalafmt.conf"})," file in the ",(0,t.jsx)(a.code,{children:".scala-build/.scalafmt.conf"})," directory with default rules. The default rules in this case are:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-hocon",children:"version = 3.7.12\nrunner.dialect = scala3\n"})}),"\n",(0,t.jsx)(a.admonition,{type:"note",children:(0,t.jsxs)(a.p,{children:["The default version of ",(0,t.jsx)(a.code,{children:"scalafmt"})," is linked to the Scala CLI version you are using. In case you want to use a different version, you can override it with the ",(0,t.jsx)(a.code,{children:"--fmt-version"})," option. The defaults might also change after doing a Scala CLI version update."]})}),"\n",(0,t.jsx)(a.h3,{id:"custom-config",children:"Custom config"}),"\n",(0,t.jsxs)(a.p,{children:["The custom configuration will be used if the ",(0,t.jsx)(a.code,{children:".scalafmt.conf"})," file is present in the root directory of the project.\nYou can create a ",(0,t.jsx)(a.code,{children:".scalafmt.conf"})," file in the root directory of your project with the desired ",(0,t.jsx)(a.code,{children:"Scalafmt"})," configuration."]}),"\n",(0,t.jsxs)(a.p,{children:["Scala CLI also allows you to pass the relative path to the desired config with ",(0,t.jsx)(a.code,{children:"--scalafmt-conf"}),", ",(0,t.jsx)(a.code,{children:"--scalafmt-config"})," or ",(0,t.jsx)(a.code,{children:"--fmt-config"}),". For example:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",metastring:"fail",children:"scala-cli fmt --check --scalafmt-conf=super.scalafmt.conf FormattingExample.scala\n"})}),"\n",(0,t.jsxs)(a.p,{children:["This command will check the format of the ",(0,t.jsx)(a.code,{children:"FormattingExample.scala"})," file using the custom configuration from the ",(0,t.jsx)(a.code,{children:"super.scalafmt.conf"})," file."]}),"\n",(0,t.jsx)(a.h3,{id:"custom-dialect",children:"Custom dialect"}),"\n",(0,t.jsxs)(a.p,{children:["You can specify the dialect of Scala using ",(0,t.jsx)(a.code,{children:"--dialect"})," or ",(0,t.jsx)(a.code,{children:"--scalafmt-dialect"})," parameter. For example:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"scala-cli fmt --dialect=scala3 .\n"})}),"\n",(0,t.jsxs)(a.p,{children:["This command will run check using Scala 3 dialect. All dialects can be found in ",(0,t.jsx)(a.a,{href:"https://scalameta.org/scalafmt/docs/configuration.html#scala-dialects",children:"Scalafmt documentation"})," in section ",(0,t.jsx)(a.em,{children:"Scala Dialects"}),"."]}),"\n",(0,t.jsx)(a.h3,{id:"custom-version",children:"Custom version"}),"\n",(0,t.jsxs)(a.p,{children:["You can specify the version of Scalafmt using ",(0,t.jsx)(a.code,{children:"--fmt-version"})," or ",(0,t.jsx)(a.code,{children:"--scalafmt-version"})," parameter. For example:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"scala-cli fmt --fmt-version=3.7.12 .\n"})}),"\n",(0,t.jsxs)(a.p,{children:["The version of Scalafmt can be found in ",(0,t.jsx)(a.a,{href:"https://github.com/scalameta/scalafmt/releases",children:"Scalafmt releases"})," on Github."]}),"\n",(0,t.jsx)(a.h3,{id:"saving-the-configuration",children:"Saving the configuration"}),"\n",(0,t.jsxs)(a.p,{children:["The configuration can be saved in the ",(0,t.jsx)(a.code,{children:".scalafmt.conf"})," file in the root directory of the project automatically by running the following command:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"scala-cli fmt --save-scalafmt-conf .\n"})}),"\n",(0,t.jsxs)(a.h3,{id:"direct-scalafmt-arguments",children:["Direct ",(0,t.jsx)(a.code,{children:"scalafmt"})," arguments"]}),"\n",(0,t.jsxs)(a.p,{children:["You can pass any ",(0,t.jsx)(a.code,{children:"scalafmt"})," arguments directly to the ",(0,t.jsx)(a.code,{children:"scalafmt"})," command using ",(0,t.jsx)(a.code,{children:"-F"})," or ",(0,t.jsx)(a.code,{children:"--scalafmt-arg"})," parameter. For example:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"scala-cli fmt -F --help\n"})}),"\n",(0,t.jsxs)(a.p,{children:["The full list of ",(0,t.jsx)(a.code,{children:"scalafmt"})," arguments can be found in the ",(0,t.jsx)(a.a,{href:"https://scalameta.org/scalafmt/docs/installation.html#--help",children:"Scalafmt CLI documentation"})," in section ",(0,t.jsx)(a.em,{children:(0,t.jsx)(a.code,{children:"--help"})}),"."]}),"\n",(0,t.jsx)(a.hr,{}),"\n",(0,t.jsx)(a.h2,{id:"see-also",children:"See also"}),"\n",(0,t.jsxs)(a.p,{children:["Please see the our ",(0,t.jsx)(a.a,{href:"/docs/cookbooks/introduction/gh-action#check-your-scala-code-format",children:"Github Actions Cookbook"})," to learn how to setup checking your Scala code formating using Github Actions. And for more information about Scalafmt, please see the ",(0,t.jsx)(a.a,{href:"https://scalameta.org/scalafmt/",children:"Scalafmt documentation"}),"."]})]})}function m(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},2267:(e,a,n)=>{n.d(a,{Z:()=>c,b:()=>i});n(6540);var t=n(3554),s=n(4848);function c(e){let{children:a}=e;return(0,s.jsx)("div",{className:"runnable-command",children:a})}function i(e){let{url:a}=e;return(0,s.jsx)(t.A,{playing:!0,loop:!0,muted:!0,controls:!0,width:"100%",height:"",url:a})}}}]);