"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9045],{1376(e,n,a){a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"guides/scripting/shebang","title":"Shebang","description":"This guide explains the differences between the run and shebang sub-commands, mainly covering how each of them","source":"@site/docs/guides/scripting/shebang.md","sourceDirName":"guides/scripting","slug":"/guides/scripting/shebang","permalink":"/docs/guides/scripting/shebang","draft":false,"unlisted":false,"editUrl":"https://github.com/Virtuslab/scala-cli/edit/main/website/docs/guides/scripting/shebang.md","tags":[],"version":"current","sidebarPosition":31,"frontMatter":{"title":"Shebang","sidebar_position":31},"sidebar":"tutorialSidebar","previous":{"title":"Scripts","permalink":"/docs/guides/scripting/scripts"},"next":{"title":"Scala.js","permalink":"/docs/guides/advanced/scala-js"}}');var l=a(4848),t=a(8453),r=a(2267);const i={title:"Shebang",sidebar_position:31},c=void 0,o={},d=[{value:"<code>shebang</code> script headers",id:"shebang-script-headers",level:3},{value:"<code>shebang</code> and the command line",id:"shebang-and-the-command-line",level:3},{value:"Script files&#39; extensions",id:"script-files-extensions",level:3}];function h(e){const n={admonition:"admonition",code:"code",h3:"h3",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["This guide explains the differences between the ",(0,l.jsx)(n.code,{children:"run"})," and ",(0,l.jsx)(n.code,{children:"shebang"})," sub-commands, mainly covering how each of them\nparses its arguments."]}),"\n",(0,l.jsxs)(n.h3,{id:"shebang-script-headers",children:[(0,l.jsx)(n.code,{children:"shebang"})," script headers"]}),"\n",(0,l.jsxs)(n.p,{children:["Before proceeding, let's discuss how Scala CLI works in a script without the ",(0,l.jsx)(n.code,{children:"shebang"})," command.\nHere is a simple ",(0,l.jsx)(n.code,{children:"hello.sc"})," script with a ",(0,l.jsx)(n.code,{children:"shebang"})," header:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",metastring:"title=hello.sc",children:"#!/usr/bin/env -S scala-cli -S 3\n\nprintln(args.size)\nprintln(args.headOption)\n"})}),"\n",(0,l.jsx)(n.p,{children:"And it works correctly:"}),"\n",(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"chmod +x hello.sc\n./hello.sc    \n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"0\nNone\n"})})]}),"\n",(0,l.jsx)(n.p,{children:"And it also works:"}),"\n",(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"./hello.sc -- Hello World\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"2\nSome(Hello)\n"})})]}),"\n",(0,l.jsxs)(n.p,{children:["Note that the extra ",(0,l.jsx)(n.code,{children:"--"})," must be added to make it work. If it is not supplied, the result is:"]}),"\n",(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"run-fail",children:"./hello.sc Hello World\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"[error] Hello: input file not found\nWorld: input file not found\n"})})]}),"\n",(0,l.jsxs)(n.p,{children:["If we modify our script slightly and use the ",(0,l.jsx)(n.code,{children:"shebang"})," sub-command in the header, we will get the following:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",metastring:"title=hello.sc",children:"#!/usr/bin/env -S scala-cli shebang -S 3\n\nprintln(args.size)\nprintln(args.headOption)\n"})}),"\n",(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"./hello.sc Hello World\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"2\nSome(Hello)\n"})})]}),"\n",(0,l.jsxs)(n.h3,{id:"shebang-and-the-command-line",children:[(0,l.jsx)(n.code,{children:"shebang"})," and the command line"]}),"\n",(0,l.jsxs)(n.p,{children:["Let's now see how the ",(0,l.jsx)(n.code,{children:"shebang"})," command works straight from the command line."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",metastring:"title=Main.scala ",children:'object Main {\n  def main(args: Array[String]): Unit = println(args.mkString(" "))\n}  \n'})}),"\n",(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala-cli shebang Main.scala Hello world\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"Hello world\n"})})]}),"\n",(0,l.jsxs)(n.admonition,{type:"note",children:[(0,l.jsxs)(n.p,{children:["Please note that ",(0,l.jsx)(n.code,{children:"shebang"})," changing how arguments are parsed means that every option after the first input will be treated as\nan argument to the app."]}),(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"scala-cli shebang Main.scala -S 2.13 #-S 2.13 is not recognised as an option, but as app arguments\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"-S 2.13\n"})})]})]}),"\n",(0,l.jsxs)(n.p,{children:["If we try to do the same with the ",(0,l.jsx)(n.code,{children:"run"})," sub-command, we get the following error:"]}),"\n",(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"run-fail",children:"scala-cli run Main.scala Hello world\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"[error]  Hello: input file not found\nworld: input file not found\n"})})]}),"\n",(0,l.jsx)(n.h3,{id:"script-files-extensions",children:"Script files' extensions"}),"\n",(0,l.jsxs)(n.p,{children:["When running the ",(0,l.jsx)(n.code,{children:"shebang"})," subcommand, script files don't need the ",(0,l.jsx)(n.code,{children:".sc"})," extension,\nbut they are then REQUIRED to start with a shebang line:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",metastring:"title=hello-with-shebang",children:"#!/usr/bin/env -S scala-cli shebang -S 3\n\nprintln(args.size)\nprintln(args.headOption)\n"})}),"\n",(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"chmod +x hello-with-shebang\n./hello-with-shebang Hello World\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"2\nSome(Hello)\n"})})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-scala",metastring:"title=hello-no-shebang",children:"println(args.size)\nprintln(args.headOption)\n"})}),"\n",(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",metastring:"run-fail",children:"chmod +x hello-no-shebang\nscala-cli shebang hello-no-shebang Hello World\n"})}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-text",children:"hello-no-shebang: unrecognized source type (expected .scala or .sc extension, or a directory)\n"})})]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["Files with no extensions are always run as scripts even though they may contain e.g. valid ",(0,l.jsx)(n.code,{children:".scala"})," program."]})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},2267(e,n,a){a.d(n,{Z:()=>t,b:()=>r});a(6540);var s=a(9487),l=a(4848);function t({children:e}){return(0,l.jsx)("div",{className:"runnable-command",children:e})}function r({url:e}){return(0,l.jsx)(s.A,{playing:!0,loop:!0,muted:!0,controls:!0,width:"100%",height:"",url:e})}},8453(e,n,a){a.d(n,{R:()=>r,x:()=>i});var s=a(6540);const l={},t=s.createContext(l);function r(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(t.Provider,{value:n},e.children)}},9487(e,n,a){a.d(n,{A:()=>N});var s=a(6540);const l=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,t=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,r=/\.(m3u8)($|\?)/i,i=/\.(mpd)($|\?)/i,c=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,o=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,d=/vimeo\.com\/(?!progressive_redirect).+/,h=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,u=/open\.spotify\.com\/(\w+)\/(\w+)/i,m=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+|(videos?\/|\?video=)\d+)($|\?)/,p=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,g=(e,n)=>{if(Array.isArray(e)){for(const a of e){if("string"==typeof a&&g(a,n))return!0;if(g(a.src,n))return!0}return!1}return n(e)},b={html:e=>g(e,e=>l.test(e)||t.test(e)),hls:e=>g(e,e=>r.test(e)),dash:e=>g(e,e=>i.test(e)),mux:e=>c.test(e),youtube:e=>o.test(e),vimeo:e=>d.test(e)&&!t.test(e)&&!r.test(e),wistia:e=>h.test(e),spotify:e=>u.test(e),twitch:e=>m.test(e),tiktok:e=>p.test(e)};var x=s.forwardRef((e,n)=>{const a=l.test(`${e.src}`)?"audio":"video";return s.createElement(a,{...e,ref:n},e.children)});var y=[{key:"hls",name:"hls.js",canPlay:b.hls,canEnablePIP:()=>!0,player:(0,s.lazy)(()=>Promise.all([a.e(4243),a.e(4945),a.e(2262)]).then(a.bind(a,1833)))},{key:"dash",name:"dash.js",canPlay:b.dash,canEnablePIP:()=>!0,player:(0,s.lazy)(()=>Promise.all([a.e(4243),a.e(6395)]).then(a.bind(a,9380)))},{key:"mux",name:"Mux",canPlay:b.mux,canEnablePIP:()=>!0,player:(0,s.lazy)(()=>Promise.all([a.e(4243),a.e(4945),a.e(2723)]).then(a.bind(a,994)))},{key:"youtube",name:"YouTube",canPlay:b.youtube,player:(0,s.lazy)(()=>a.e(8446).then(a.bind(a,126)))},{key:"vimeo",name:"Vimeo",canPlay:b.vimeo,player:(0,s.lazy)(()=>a.e(6173).then(a.bind(a,9301)))},{key:"wistia",name:"Wistia",canPlay:b.wistia,canEnablePIP:()=>!0,player:(0,s.lazy)(()=>a.e(9340).then(a.bind(a,9971)))},{key:"spotify",name:"Spotify",canPlay:b.spotify,canEnablePIP:()=>!1,player:(0,s.lazy)(()=>a.e(2771).then(a.bind(a,9422)))},{key:"twitch",name:"Twitch",canPlay:b.twitch,canEnablePIP:()=>!1,player:(0,s.lazy)(()=>a.e(2042).then(a.bind(a,5946)))},{key:"tiktok",name:"TikTok",canPlay:b.tiktok,canEnablePIP:()=>!1,player:(0,s.lazy)(()=>a.e(8085).then(a.bind(a,3173)))},{key:"html",name:"html",canPlay:b.html,canEnablePIP:()=>!0,player:x}];const f={width:"320px",height:"180px",volume:1,playbackRate:1,previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}"},j=s.forwardRef((e,n)=>{const{playing:a,pip:l}=e,t=e.activePlayer,r=(0,s.useRef)(null),i=(0,s.useRef)(!0);(0,s.useEffect)(()=>{var n,s;r.current&&(r.current.paused&&!0===a&&r.current.play(),r.current.paused||!1!==a||r.current.pause(),r.current.playbackRate=null!=(n=e.playbackRate)?n:1,r.current.volume=null!=(s=e.volume)?s:1)}),(0,s.useEffect)(()=>{var e,n,a,s,t;if(r.current&&globalThis.document){if(l&&!document.pictureInPictureElement)try{null==(n=(e=r.current).requestPictureInPicture)||n.call(e)}catch(i){}if(!l&&document.pictureInPictureElement)try{null==(s=(a=r.current).exitPictureInPicture)||s.call(a),null==(t=document.exitPictureInPicture)||t.call(document)}catch(i){}}},[l]);if(!t)return null;const c={},o=["onReady","onStart"];for(const s in e)s.startsWith("on")&&!o.includes(s)&&(c[s]=e[s]);return s.createElement(t,{...c,style:e.style,className:e.className,slot:e.slot,ref:(0,s.useCallback)(e=>{r.current=e,"function"==typeof n?n(e):null!==n&&(n.current=e)},[n]),src:e.src,crossOrigin:e.crossOrigin,preload:e.preload,controls:e.controls,muted:e.muted,autoPlay:e.autoPlay,loop:e.loop,playsInline:e.playsInline,disableRemotePlayback:e.disableRemotePlayback,config:e.config,onLoadStart:n=>{var a,s;i.current=!0,null==(a=e.onReady)||a.call(e),null==(s=e.onLoadStart)||s.call(e,n)},onPlay:n=>{var a,s;i.current&&(i.current=!1,null==(a=e.onStart)||a.call(e,n)),null==(s=e.onPlay)||s.call(e,n)}},e.children)});j.displayName="Player";var w=j;const v=(0,s.lazy)(()=>a.e(6353).then(a.bind(a,9543))),P=[],k=({children:e})=>e;var N=((e,n)=>{const a=s.forwardRef((a,l)=>{const t={...f,...a},{src:r,slot:i,className:c,style:o,width:d,height:h,fallback:u,wrapper:m}=t,[p,g]=(0,s.useState)(!!t.light);(0,s.useEffect)(()=>{t.light?g(!0):g(!1)},[t.light]);const b=e=>{var n;g(!1),null==(n=t.onClickPreview)||n.call(t,e)},x=null==m?k:m,y=!1===u?k:s.Suspense;return s.createElement(x,{slot:i,className:c,style:{width:d,height:h,...o}},s.createElement(y,{fallback:u},p?(e=>{if(!e)return null;const{light:n,playIcon:a,previewTabIndex:l,oEmbedUrl:r,previewAriaLabel:i}=t;return s.createElement(v,{src:e,light:n,playIcon:a,previewTabIndex:l,previewAriaLabel:i,oEmbedUrl:r,onClickPreview:b})})(r):(a=>{var r,o;const d=(a=>{for(const n of[...P,...e])if(a&&n.canPlay(a))return n;return n||null})(a);if(!d)return null;const{style:h,width:u,height:m,wrapper:p}=t,g=null==(r=t.config)?void 0:r[d.key];return s.createElement(w,{...t,ref:l,activePlayer:null!=(o=d.player)?o:d,slot:p?void 0:i,className:p?void 0:c,style:p?{display:"block",width:"100%",height:"100%"}:{display:"block",width:u,height:m,...h},config:g})})(r)))});return a.displayName="ReactPlayer",a.addCustomPlayer=e=>{P.push(e)},a.removeCustomPlayers=()=>{P.length=0},a.canPlay=n=>{if(n)for(const a of[...P,...e])if(a.canPlay(n))return!0;return!1},a.canEnablePIP=n=>{var a;if(n)for(const s of[...P,...e])if(s.canPlay(n)&&(null==(a=s.canEnablePIP)?void 0:a.call(s)))return!0;return!1},a})(y,y[y.length-1])}}]);