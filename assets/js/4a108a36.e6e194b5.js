"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7203],{1409:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"guides/introduction/dependencies","title":"Managing dependencies","description":"Dependency syntax","source":"@site/docs/guides/introduction/dependencies.md","sourceDirName":"guides/introduction","slug":"/guides/introduction/dependencies","permalink":"/docs/guides/introduction/dependencies","draft":false,"unlisted":false,"editUrl":"https://github.com/Virtuslab/scala-cli/edit/main/website/docs/guides/introduction/dependencies.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Managing dependencies","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Configuration","permalink":"/docs/guides/introduction/configuration"},"next":{"title":"Updating dependencies","permalink":"/docs/guides/introduction/update-dependencies"}}');var c=s(4848),d=s(8453);s(2267);const r={title:"Managing dependencies",sidebar_position:3},a="Managing dependencies",o={},l=[{value:"Dependency syntax",id:"dependency-syntax",level:2},{value:"Repositories",id:"repositories",level:3},{value:"Predefined repositories",id:"predefined-repositories",level:4},{value:"Excluding Transitive Dependencies",id:"excluding-transitive-dependencies",level:3},{value:"Dependency classifiers",id:"dependency-classifiers",level:3},{value:"Test dependencies",id:"test-dependencies",level:3},{value:"Compile-Only dependencies",id:"compile-only-dependencies",level:3},{value:"Specifying dependencies from the command line",id:"specifying-dependencies-from-the-command-line",level:2},{value:"Adding local JARs as dependencies",id:"adding-local-jars-as-dependencies",level:2}];function t(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"managing-dependencies",children:"Managing dependencies"})}),"\n",(0,c.jsx)(n.h2,{id:"dependency-syntax",children:"Dependency syntax"}),"\n",(0,c.jsx)(n.p,{children:"Dependencies are declared in Scala CLI according to the following format:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"groupID:artifactID:revision\n"})}),"\n",(0,c.jsxs)(n.p,{children:["This is similar to how you declare dependencies in SBT with the ",(0,c.jsx)(n.code,{children:"%"})," character.\nFor example:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"org.scala-lang.modules:scala-parallel-collections_2.13:1.0.4\n"})}),"\n",(0,c.jsxs)(n.p,{children:["You can also skip explicitly stating the Scala version in the artifact name by repeating the ",(0,c.jsx)(n.code,{children:":"})," character after\nthe ",(0,c.jsx)(n.code,{children:"groupID"})," (similarly to how you can do the same with ",(0,c.jsx)(n.code,{children:"%%"})," in SBT). This is just a shortcut, Scala CLI will still add\nthe Scala version for you when fetching the dependency. Also, this only applies to Scala dependencies."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"org.scala-lang.modules::scala-parallel-collections:1.0.4\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Java and other non-scala dependencies follow the same syntax (without the ",(0,c.jsx)(n.code,{children:"::"})," for implicit Scala version, of course).\nFor example:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-text",children:"org.postgresql:postgresql:42.2.8\n"})}),"\n",(0,c.jsx)(n.h3,{id:"repositories",children:"Repositories"}),"\n",(0,c.jsxs)(n.p,{children:["Sometimes dependencies are published into non-standard repositories, like nightly builds published to Sonatype Snapshots. Scala CLI can use additional maven and ivy repositories with the ",(0,c.jsx)(n.code,{children:"repository"})," directive or ",(0,c.jsx)(n.code,{children:"--repository"})," command line options:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-scala",children:"//> using repository sonatype:snapshots\n"})}),"\n",(0,c.jsx)(n.p,{children:"or"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:'scala-cli --repository "https://maven-central.storage-download.googleapis.com/maven2"\n'})}),"\n",(0,c.jsx)(n.p,{children:"Both directive and command line option accept predefined repository definitions (see below) or a URL of the root of Maven repository."}),"\n",(0,c.jsxs)(n.p,{children:["Repositories can also be resolved from the ",(0,c.jsx)(n.code,{children:"COURSIER_REPOSITORIES"})," environment variable, but this is not recommended (more in ",(0,c.jsx)(n.a,{href:"https://get-coursier.io/docs/other-repositories",children:"Coursier documentation"}),")."]}),"\n",(0,c.jsx)(n.h4,{id:"predefined-repositories",children:"Predefined repositories"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"predefined repository"}),(0,c.jsx)(n.th,{children:"kind"}),(0,c.jsx)(n.th,{children:"description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"central"}),(0,c.jsxs)(n.td,{children:["Maven ",(0,c.jsx)(n.a,{href:"https://repo1.maven.org/maven2",children:"(root)"})]}),(0,c.jsx)(n.td,{children:"Used by default, default repository for most Scala libraries"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["sonatype",":snapshots"]}),(0,c.jsxs)(n.td,{children:["Maven ",(0,c.jsx)(n.a,{href:"https://oss.sonatype.org/content/repositories/snapshots",children:"(root)"})]}),(0,c.jsxs)(n.td,{children:["Repositories where most Scala libraries publish its snapshots / nightly builds. Used when ",(0,c.jsx)(n.code,{children:"X.nightly"})," is used as Scala version e.g. ",(0,c.jsx)(n.code,{children:"3.1.nightly"}),"."]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["sonatype-s01",":snapshots"]}),(0,c.jsxs)(n.td,{children:["Maven ",(0,c.jsx)(n.a,{href:"https://s01.oss.sonatype.org/content/repositories/snapshots",children:"(root)"})]}),(0,c.jsxs)(n.td,{children:["This repository is similar to the ",(0,c.jsx)(n.code,{children:"sonatype:snapshots"})," repository but is dedicated for accounts that were created after February 2021 and which publish snapshots of their libraries."]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"snapshots"}),(0,c.jsxs)(n.td,{children:["Maven ",(0,c.jsx)(n.a,{href:"https://oss.sonatype.org/content/repositories/snapshots",children:"(root)"})," and Maven S01 ",(0,c.jsx)(n.a,{href:"https://s01.oss.sonatype.org/content/repositories/snapshots",children:"(root)"})]}),(0,c.jsxs)(n.td,{children:["An alias for ",(0,c.jsx)(n.code,{children:"sonatype:snapshots"})," and ",(0,c.jsx)(n.code,{children:"sonatype-s01:snapshots"}),"."]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"ivy2local"}),(0,c.jsx)(n.td,{children:"Ivy"}),(0,c.jsxs)(n.td,{children:["Local ivy repository, used to publish things locally (e.g. by ",(0,c.jsx)(n.code,{children:"publishLocal"}),"). Localized in ",(0,c.jsx)(n.code,{children:"<ivy-home>/local"}),", usually ",(0,c.jsx)(n.code,{children:"<user-home>/.ivy/local"}),"."]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"m2Local"}),(0,c.jsx)(n.td,{children:"Maven"}),(0,c.jsxs)(n.td,{children:["Local maven repository, localized in ",(0,c.jsx)(n.code,{children:"<user-home>/.m2/repository"})]})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"jitpack"}),(0,c.jsx)(n.td,{children:"Maven"}),(0,c.jsxs)(n.td,{children:["jitpack supports github repo as dependency. Syntax is ",(0,c.jsx)(n.code,{children:'using repository "jitpack"'})]})]})]})]}),"\n",(0,c.jsxs)(n.p,{children:["Scala CLI delegates parsing of predefined repositories to Coursier and full details can be obtained from Coursier source code (",(0,c.jsx)(n.a,{href:"https://github.com/coursier/coursier/blob/2444eebcc151e0f6927e269137e8737c1f31cbe2/modules/coursier/jvm/src/main/scala/coursier/LocalRepositories.scala",children:"here"})," and ",(0,c.jsx)(n.a,{href:"https://github.com/coursier/coursier/blob/2444eebcc151e0f6927e269137e8737c1f31cbe2/modules/coursier/shared/src/main/scala/coursier/internal/SharedRepositoryParser.scala",children:"here"}),")"]}),"\n",(0,c.jsx)(n.h3,{id:"excluding-transitive-dependencies",children:"Excluding Transitive Dependencies"}),"\n",(0,c.jsxs)(n.p,{children:["To exclude a transitive dependency from a Scala CLI project use the ",(0,c.jsx)(n.code,{children:"exclude"})," parameter:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"exclude=org%%name"})," - for Scala modules"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"exclude=org%name"})," - for Java modules"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"It requires passing the organization and module name of the dependency to be excluded. For example, let's say you have\nthe following Scala code:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-scala",metastring:"compile",children:'//> using dep com.lihaoyi::pprint:0.9.0\nobject Main extends App {\n  println("Hello")\n}\n'})}),"\n",(0,c.jsxs)(n.p,{children:["If you want to compile it with the ",(0,c.jsx)(n.code,{children:"pprint"})," library but exclude its ",(0,c.jsx)(n.code,{children:"sourcecode"})," dependency, you can use\nthe ",(0,c.jsx)(n.code,{children:"exclude"})," parameter as follows:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-scala",metastring:"compile",children:'//> using dep com.lihaoyi::pprint:0.9.0,exclude=com.lihaoyi%%sourcecode\nobject Main extends App {\n  println("Hello")\n}\n'})}),"\n",(0,c.jsxs)(n.p,{children:["To exclude Scala modules, you can also use a single ",(0,c.jsx)(n.code,{children:"%"})," but with the full name of the module name, like this:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-scala",metastring:"compile",children:'//> using dep com.lihaoyi::pprint:0.9.0,exclude=com.lihaoyi%sourcecode_3\nobject Main extends App {\n  println("Hello")\n}\n'})}),"\n",(0,c.jsx)(n.h3,{id:"dependency-classifiers",children:"Dependency classifiers"}),"\n",(0,c.jsxs)(n.p,{children:["To specify a classifier of a dependency in a Scala CLI project, use the ",(0,c.jsx)(n.code,{children:"classifier"})," parameter:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"classifier={classifier_name}"})}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["If you want to use the ",(0,c.jsx)(n.code,{children:"pytorch"})," dependency with the classifier ",(0,c.jsx)(n.code,{children:"linux-x86_64"}),", use the ",(0,c.jsx)(n.code,{children:"classifier"})," parameter as\nfollows:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-scala",metastring:"compile",children:'//> using dep org.bytedeco:pytorch:2.5.1-1.5.11,classifier=linux-x86_64\nobject Main extends App {\n  println("Hello")\n}\n'})}),"\n",(0,c.jsx)(n.admonition,{type:"caution",children:(0,c.jsxs)(n.p,{children:["When using the ",(0,c.jsx)(n.code,{children:"classifier"}),", ",(0,c.jsx)(n.code,{children:"exclude"})," or others parameters, it is necessary to wrap the value of dependency within double quotes ",(0,c.jsx)(n.code,{children:'"'}),".\nIf this is omitted, Scala CLI treats these parameters as dependencies, resulting in a dependency parsing error."]})}),"\n",(0,c.jsx)(n.h3,{id:"test-dependencies",children:"Test dependencies"}),"\n",(0,c.jsxs)(n.p,{children:["It is possible to declare dependencies limited to the test scope with the ",(0,c.jsx)(n.code,{children:"using test.dep"})," directive."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-scala",metastring:"compile",children:"//> using test.dep org.scalameta::munit::1.0.2\n"})}),"\n",(0,c.jsxs)(n.p,{children:["More details can be found in\nthe ",(0,c.jsxs)(n.a,{href:"/docs/guides/introduction/using-directives#directives-with-a-test-scope-equivalent",children:[(0,c.jsx)(n.code,{children:"using"})," directives guide"]}),"."]}),"\n",(0,c.jsx)(n.h3,{id:"compile-only-dependencies",children:"Compile-Only dependencies"}),"\n",(0,c.jsxs)(n.p,{children:["It is possible to declare dependencies that are only used during the compilation phase with the ",(0,c.jsx)(n.code,{children:"using compileOnly.dep"})," directive."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-scala",metastring:"compile",children:"//> using compileOnly.dep com.github.plokhotnyuk.jsoniter-scala::jsoniter-scala-macros:2.23.2\n"})}),"\n",(0,c.jsxs)(n.p,{children:["More details can be found in\nthe ",(0,c.jsxs)(n.a,{href:"/docs/commands/compile#compile-only-dependencies",children:[(0,c.jsx)(n.code,{children:"compile"})," command guide"]}),"."]}),"\n",(0,c.jsx)(n.h2,{id:"specifying-dependencies-from-the-command-line",children:"Specifying dependencies from the command line"}),"\n",(0,c.jsxs)(n.p,{children:["You can add dependencies on the command line, with the ",(0,c.jsx)(n.code,{children:"--dependency"})," option:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-scala",metastring:"title=Sample.sc",children:'println("Hello")\n'})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"scala-cli compile Sample.sc \\\n  --dependency org.scala-lang.modules::scala-parallel-collections:1.0.4\n"})}),"\n",(0,c.jsx)(n.p,{children:"You can also add a URL fallback for a JAR dependency, if it can't be fetched otherwise:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:'scala-cli compile Sample.sc \\\n  --dependency "org::name::version,url=https://url-to-the-jar"\n'})}),"\n",(0,c.jsxs)(n.p,{children:["Note that ",(0,c.jsx)(n.code,{children:"--dependency"})," is only meant as a convenience. You should favor adding dependencies in the sources themselves\nvia ",(0,c.jsx)(n.a,{href:"/docs/guides/introduction/configuration#special-imports",children:"using directives"}),". However, the ",(0,c.jsx)(n.code,{children:"--dependency"})," CLI option takes\nprecedence over ",(0,c.jsx)(n.code,{children:"using"})," directives, so it can be used to override a ",(0,c.jsx)(n.code,{children:"using"})," directive, such as when you want to work\nwith a different dependency version."]}),"\n",(0,c.jsxs)(n.p,{children:["You can also add repositories on the command-line, via ",(0,c.jsx)(n.code,{children:"--repository"})," or ",(0,c.jsx)(n.code,{children:"//> using repos"})]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:"scala-cli compile Sample.sc \\\n  --dependency com.pany::util:33.1.0 --repo https://artifacts.pany.com/maven\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Lastly, you can also add simple JAR files as dependencies with ",(0,c.jsx)(n.code,{children:"--jar"}),":"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:"scala-cli compile Sample.sc --jar /path/to/library.jar\n"})}),"\n",(0,c.jsx)(n.h2,{id:"adding-local-jars-as-dependencies",children:"Adding local JARs as dependencies"}),"\n",(0,c.jsxs)(n.p,{children:["You can pass local JARs from the command line with the ",(0,c.jsx)(n.code,{children:"--extra-jar"})," option:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:'scala-cli compile Sample.sc \\\n  --extra-jar "./path/to/custom.jar"\n'})}),"\n",(0,c.jsx)(n.p,{children:"Local sources JARs can also be passed in a similar manner:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",metastring:"ignore",children:'scala-cli compile Sample.sc \\\n  --extra-source-jar "./path/to/custom-sources.jar"\n'})}),"\n",(0,c.jsxs)(n.p,{children:["Both can be handled with the appropriate ",(0,c.jsx)(n.code,{children:"using"})," directives, too:"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-scala",children:"//> using jar ./path/to/custom.jar\n//> using sourceJar ./path/to/custom-sources.jar\n"})}),"\n",(0,c.jsx)(n.admonition,{type:"caution",children:(0,c.jsxs)(n.p,{children:["Local JARs with the ",(0,c.jsx)(n.code,{children:"*-sources.jar"})," suffix are assumed to be sources JARs and are treated as such."]})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(t,{...e})}):t(e)}},2267:(e,n,s)=>{s.d(n,{Z:()=>r,b:()=>a});s(6540);var i=s(3554),c=s.n(i),d=s(4848);function r(e){let{children:n}=e;return(0,d.jsx)("div",{className:"runnable-command",children:n})}function a(e){let{url:n}=e;return(0,d.jsx)(c(),{playing:!0,loop:!0,muted:!0,controls:!0,width:"100%",height:"",url:n})}}}]);